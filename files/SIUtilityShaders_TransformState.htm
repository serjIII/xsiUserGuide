<!DOCTYPE html>

<!-- saved from url=(0024)http://docs.autodesk.com -->
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta name="product" content="SI">
      <meta name="release" content="2015">
      <meta name="book" content="GeneralUser">
      <meta name="created" content="2014-03-26">
      <meta name="topicid" content="GUID-F7F177D5-4A66-4E9A-BE9D-E7988EA30459">
      <meta name="topic-type" content="concept">
      <title>Transform State</title>
      <link rel="stylesheet" type="text/css" href="../style/softimage.css"><script type="text/javascript" src="../scripts/ac_common.js"></script><script type="text/javascript" src="../scripts/utils/adsk.redirect.js"></script></head>
   <body height="100%">
      <div class="body_content" id="body-content"><span class="anchor_wrapper"><a name="GUID-F7F177D5-4A66-4E9A-BE9D-E7988EA30459"></a></span><div class="head">
            <h1>Transform State</h1>
         </div>
         <p><span class="anchor_wrapper"><a name="GUID-BDBC9295-00B4-4052-9A3E-70AECA103CA1"></a></span> <span class="char_link"><a href="shaderpresets148.htm#WSBAD515F3CA664C4AAA965DCA688D5B24-0003">Render Tree Usage</a></span> 
         </p>
         <p><span class="anchor_wrapper"><a name="GUID-CA06109C-F00A-438F-8346-01CE21D15782"></a></span> <em class="strong">Category:</em> Data &gt; Shading State 
         </p>
         <p><span class="anchor_wrapper"><a name="GUID-A147B719-86A3-4E83-A4DB-3A4A0940BF7E"></a></span> <em class="strong">Shader Family:</em> Texture 
         </p>
         <p><span class="anchor_wrapper"><a name="GUID-26B5B90C-AAD7-4122-8DE6-B96B3FDC3CDB"></a></span> <em class="strong">Output:</em> Matrix, Boolean 
         </p>
         <p><span class="anchor_wrapper"><a name="GUID-EC10C052-6823-4111-98AB-E88694E07446"></a></span> This shader makes the transformation parameters from the scene element (miInstance)
            you choose available in the transform state structure as a transform matrix. 
         </p>
         <p><span class="anchor_wrapper"><a name="GUID-CF6DB60E-7739-4F0D-92EA-05B5DF9EA37F"></a></span>You can also make the transformation parameters for the element available in the transform
            state structure as a motion transform matrix for creating motion-blurred geometry.
            
         </p>
         <p><span class="anchor_wrapper"><a name="GUID-8C52A322-FCC5-4844-A965-FD1D9AAC7884"></a></span>This node is intended for shader developers who require low-level information during
            the rendering process. You should have some shader-writing knowledge in mental ray
            in order to use this tool properly. 
         </p><span class="anchor_wrapper"><a name="TABLE_58E77BCCF88F4BCF8DFDD60304FCA392"></a></span><div class="table_Ruled">
            <table cellpadding="0" cellspacing="0" class="ruled">
               <colgroup>
                  <col width="220px" align="left">
                  <col align="left">
               </colgroup>
               <tr class="ruledOddRow">
                  <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-8F51C04B-92EB-4398-A294-5E0AD0C0C522"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-BB7C2749-2BF2-436D-84D7-C664191A9764">Scene Item</span> 
                     </p> 
                  </td>
                  <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-CF68E460-40F8-4ECF-B548-DB58702E8F26"></a></span><p class="table-body">Type of element in the scene to set as the current instance (miInstance) geometry:
                        Object (geometric), Light, or Camera. 
                     </p> 
                  </td>
               </tr>
               <tr class="ruledEvenRow">
                  <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-9D678110-511D-4604-935D-78D2DFD31EFF"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-8191AB11-90BC-4FAE-820F-BE31A975AAB1">Transform</span> 
                     </p> 
                  </td>
                  <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-8D7E0FD2-142A-40C0-B4E2-E54D0289DA8F"></a></span><p class="table-body">Lets you choose one of the following transform parameters: </p> <span class="anchor_wrapper"><a name="GUID-31B9D42D-E133-459C-AE8A-0B30B392CF49"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-5C33AAFE-0A22-4785-AFBD-4D9B6AC62CA2">Closed Shutter</span> gets the transform matrix for the transform of the instance element. 
                     </p> <span class="anchor_wrapper"><a name="UL_4F86AA0A53DD422FB67FA00C9147D3A1"></a></span><ul>
                        <li> 
                           <p><span class="anchor_wrapper"><a name="GUID-CDB7FA81-7599-4464-98C4-F872E29EB3C8"></a></span> <span class="MenuCascade" id="GUID-665D00B9-F3D6-44B8-AEC7-C4C4FD33F6E0">Global to Local (Closed Shutter)</span> -- <em class="strong">inst-&gt;tf.global_to_local</em>: The transform matrix establishes the transformation from the parent coordinate space
                              to the object space of the instanced element. 
                           </p> 
                        </li>
                        <li> 
                           <p><span class="anchor_wrapper"><a name="GUID-4387F13D-0391-457E-8FEF-B23CDF35FCD4"></a></span> <span class="MenuCascade" id="GUID-567C114F-DC6C-4658-9EB8-5C7C88179997">Local to Global (Closed Shutter)</span> -- <em class="strong">inst-&gt;tf.local_to_global</em>: The inverse matrix function after the tf.global_to_local matrix is returned. 
                           </p> 
                        </li>
                     </ul> <span class="anchor_wrapper"><a name="GUID-040DCBC7-9E6F-440E-9201-079524F773BA"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-2EDD3F44-B481-4690-B8BF-AF272F3AE16E">Open Shutter</span> gets the motion transform matrix for creating motion blur on the instance element.
                        
                     </p> <span class="anchor_wrapper"><a name="UL_784ED042EEF24B20AD563B86BB67DFB2"></a></span><ul>
                        <li> 
                           <p><span class="anchor_wrapper"><a name="GUID-CA86E594-85F9-4913-A3C0-ECC82A983670"></a></span> <span class="MenuCascade" id="GUID-C0E54C89-3D5A-463E-BA09-BD9683E2D0CD">Global to Local (Open Shutter)</span> -- <em class="strong">inst-&gt;motion_transform</em>: The motion transform matrix establishes the transformation from the parent coordinate
                              space to the object space of the instanced element. 
                           </p> 
                        </li>
                        <li> 
                           <p><span class="anchor_wrapper"><a name="GUID-0ACF129C-4AEF-4151-B160-7084CDFE2D54"></a></span> <span class="MenuCascade" id="GUID-9DD565E5-E8D5-49A6-9679-06FB7954C80F">Local to Global (Open Shutter)</span> -- <em class="strong">mi_matrix_invert( inst-&gt;motion_transform )</em>: The inverse matrix of the global-to-local motion transform matrix. 
                           </p> 
                        </li>
                     </ul> 
                  </td>
               </tr>
            </table>
         </div>
         <div class="section"><span class="anchor_wrapper"><a name="WSBAD515F3CA664C4AAA965DCA688D5B24-0003"></a></span> 
            <h2><span class="anchor_wrapper"><a name="GUID-FACC4EC9-122B-4E41-9771-D2F67EC5C9E3"></a></span>Render Tree Usage
            </h2> 
            <p><span class="anchor_wrapper"><a name="GUID-CC45DF4E-1DF1-4DFB-97A3-A06F31FDD3D0"></a></span>You can use this shader to get the transform data from any element and then use it
               on another scene element. In this example, the object's planar texture projection
               is transformed using the object's transformation matrix: the translation of the object
               is used to create the motion blur with the two mixed textures projected on the planar
               texture support to give the impression of a moving film strip or train tracks. 
            </p> 
            <p><span class="anchor_wrapper"><a name="GUID-FA36AEAC-C586-40D3-BB07-C1E804C7D0AD"></a></span> <img src="../images/GUID-10694980-3A97-4AC3-93EF-DBF58019B3BE-low.png"> 
            </p> 
            <p><span class="anchor_wrapper"><a name="GUID-A1696888-2B9B-48E2-84D7-E4DCC10D3D53"></a></span> <img src="../images/GUID-23BB29DA-DB04-49C5-A2C1-4AEC730027CE-low.png"> 
            </p> 
         </div>
         <div class="footer-block"><a href="../html/ac.cmtdialog.htm" class="comments-anchor" target="_blank"><span class="comments-link">Please send us your comment about this page</span></a></div><br><p class="footer-license-block"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"><img alt="Creative Commons License" style="border-width: 0;" src="../images/ccLink.png"></a>&nbsp;<em>Except where otherwise noted, this work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>. Please see the <a href="http://autodesk.com/creativecommons" target="_blank">Autodesk Creative Commons FAQ</a> for more information.</em></p><br></div>
   </body>
</html>