<!DOCTYPE html>

<!-- saved from url=(0024)http://docs.autodesk.com -->
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta name="product" content="SI">
      <meta name="release" content="2015">
      <meta name="book" content="GeneralUser">
      <meta name="created" content="2014-03-26">
      <meta name="topicid" content="GUID-F7499EE1-34DE-42D6-A823-95AB94F1A010">
      <meta name="indexterm" content="CrowdFX: constraining (locking) foot rotation">
      <meta name="topic-type" content="concept">
      <title>Locking the Feet's Rotation</title>
      <link rel="stylesheet" type="text/css" href="../style/softimage.css"><script type="text/javascript" src="../scripts/ac_common.js"></script><script type="text/javascript" src="../scripts/utils/adsk.redirect.js"></script></head>
   <body height="100%">
      <div class="body_content" id="body-content"><span class="anchor_wrapper"><a name="GUID-F7499EE1-34DE-42D6-A823-95AB94F1A010"></a></span><div class="head">
            <h1>Locking the Feet's Rotation</h1>
         </div><span class="anchor_wrapper"><a name="FIG_F2504677E8FA4A17AFEB8B98FD8202F1"></a></span><div class="figure-anchor"><img src="../images/GUID-AEDDD3BD-7D75-4F12-8575-0276A72FD797-low.png"></div>
         <p><span class="anchor_wrapper"><a name="GUID-36926E93-BAC3-4483-9894-32013B713328"></a></span>  
         </p>
         <p><span class="anchor_wrapper"><a name="GUID-BDA747F6-B825-47FB-B884-607D08945331"></a></span> When actors go around a curve or a corner, especially a sharp one as in the image
            below, you may notice that their feet slide a bit to the side (the X direction). To
            prevent this shifting, you can constrain (lock) the orientation of the actor's feet.
            
         </p><span class="anchor_wrapper"><a name="FIG_703CD882196B40A0A53B2A881B0C52C5"></a></span><div class="figure-anchor"><img src="../images/GUID-9AC55774-E289-4614-8BDB-45F84485E824-low.png"></div>
         <p><span class="anchor_wrapper"><a name="GUID-9DD5229B-A0BE-4460-942E-17836499D40D"></a></span>For best results, you should lock the feet when the actors are in a walk cycle because
            the feet are in contact with the ground for the longest amount of time, as compared
            to running. You need to find the frames in the walk cycle in which the actor's feet
            are on the ground and then lock the rotation of the feet for the duration of each
            foot's cycle. 
         </p><span class="anchor_wrapper"><a name="OL_543089A02F034EF4BFA5EA922B29B946"></a></span><p class="list-intro"><span class="anchor_wrapper"><a name="GUID-7C9321E3-82C2-4232-84E8-77CEFFBFDF28"></a></span>To lock the feet's rotation
         </p>
         <ol type="1" start="1">
            <li> Make sure that the deformers are parented correctly in the rig proxy for constraining
               the feet (and legs) â€” see <span class="char_link"><a href="GUID-721F44F7-62DF-485B-B035-48A6B2248EC4.htm">Modifying the Actor's Rig</a></span>. 
            </li>
            <li> 
               <p><span class="anchor_wrapper"><a name="GUID-6515ADB1-12CF-4029-8C3B-A2E5B10543EB"></a></span>Move to any frame in the timeline where the actors are in their walk cycle in the
                  crowd simulation. 
               </p> 
            </li>
            <li> 
               <p><span class="anchor_wrapper"><a name="GUID-CAB167FB-4256-4EFC-B3E7-A65E36A42A47"></a></span>In the simulation point cloud's Define Animation node in the Animation_Blending ICE
                  tree, get a <span class="char_link"><a href="iceref_Crowd_Lock_Feet_Constraint.htm">Crowd Lock Feet Constraint</a></span> compound. <span class="anchor_wrapper"><a name="FIG_EA654BFE5D1B4FC29226774A60AB9AA8"></a></span><div class="figure-anchor"><img src="../images/GUID-9438DF17-8A2E-431F-898B-133B9FC1D1A6-low.png"></div> 
               </p> 
            </li>
            <li> 
               <p><span class="anchor_wrapper"><a name="GUID-EC5F07B4-1279-4D34-87DA-FDC51FE9426B"></a></span>Open the <span class="MenuCascade" id="GUID-E2C8EF2B-E28D-4575-A8A5-7C1609ABE034">Crowd Lock Feet Constraint</span> compound's property editor and specify the rig proxy deformers to use for the <span class="MenuCascade" id="GUID-A70656ED-09D7-4A1C-B44A-65587FA39DE3">Left</span> and <span class="MenuCascade" id="GUID-C3F2B2D8-6854-454B-963D-AE9038A004D7">Right</span> legs as described in <span class="char_link"><a href="GUID-FA522E1A-E730-4A24-8921-EE0FDA3899F3.htm">Constraining the Legs to the Ground</a></span>. <span class="anchor_wrapper"><a name="FIG_662AED74D25844DF8DD43DFF0BB06423"></a></span><div class="figure-anchor"><img src="../images/GUID-4CFB7A3A-90A2-4E27-8770-201A1B752726-low.png"></div> 
               </p> 
            </li>
            <li>In the property editor, select the <span class="MenuCascade" id="GUID-5AFBA9DE-D557-417F-A5D3-3EFE11A1D435">Animation State</span> on which you want to lock the orientation of actor feet. 
            </li>
         </ol>
         <p><span class="anchor_wrapper"><a name="GUID-DC63B89C-24E5-4941-A9EA-AD38888782E7"></a></span>The following illustration explains how the walk cycle starts and ends in the range
            from 0 to 1. <span class="anchor_wrapper"><a name="FIG_6F05F16177B5411CBC71ACEB358C4E4D"></a></span><div class="figure-anchor"><img src="../images/GUID-1E475FB7-F97E-4518-9CCB-F63BCF1253DD-low.png"></div> 
         </p>
         <ol type="1" start="6">
            <li> 
               <p><span class="anchor_wrapper"><a name="GUID-E4422ECB-4C15-4C7C-A28B-04B7F7CAAEA9"></a></span>By default, the walk cycle starts with the Right Foot. For each foot, you need to
                  set the value (in the range of 0 to 1). For example, if the walk cycle starts with
                  the Right Foot, then the value of the <span class="MenuCascade" id="GUID-765A42B0-29D5-4E90-9FAE-4163B4A7D89F">Right Foot Start</span> field is 0. The default value for the Left Foot to start is 0.5. 
               </p> 
            </li>
            <li>By default, the Right and the Left foot are locked for the duration of 0.25. </li>
            <li>Set the <span class="MenuCascade" id="GUID-683DFDD4-89DB-464B-8806-9547025806DE">Blending Duration</span> value to blend between the constrained and unconstrained foot positions. This prevents
               the feet from popping after they reach the frame defined by the <span class="MenuCascade" id="GUID-928D2219-44FC-4A34-89EE-26C9A7E13D52">Left/Right Foot Lock Duration</span> value. By default, this value is set to 0.15. 
            </li>
            <li> 
               <p><span class="anchor_wrapper"><a name="GUID-48CFCEEF-5006-49B7-BFED-9A94A7F18098"></a></span>Set the <span class="MenuCascade" id="GUID-F2B96740-2836-4993-A190-65A867FF4FDA">Root Direction</span> and <span class="MenuCascade" id="GUID-074DA14B-6906-48BA-814A-86DEC69F08F6">Knee Direction</span> to the deformer's local axis that is pointing toward its children, as described in
                  <span class="char_link"><a href="GUID-FA522E1A-E730-4A24-8921-EE0FDA3899F3.htm">Constraining the Legs to the Ground</a></span>. <span class="anchor_wrapper"><a name="TABLE_7F5AA841309F4AE3B85ECE54CE665E9B"></a></span><div class="table_NotRuled">
                     <table cellpadding="0" cellspacing="0" class="not-ruled">
                        <colgroup>
                           <col>
                           <col>
                        </colgroup>
                        <tr class="not-ruledOddRow">
                           <td class="table-body">&nbsp; <span class="anchor_wrapper"><a name="FIG_BA4C660861FB40CE9CE78B76E66ABA45"></a></span><div class="figure-anchor"><img src="../images/GUID-93E5B3EB-87D5-4AA3-AA24-C96B1BAD1906-low.png"></div> 
                           </td>
                           <td class="table-body">&nbsp; <span class="anchor_wrapper"><a name="FIG_61FBBD5D9C9B4BD5B648B974D1171401"></a></span><div class="figure-anchor"><img src="../images/GUID-8B64701A-A7CE-4A79-A39E-D5E04E99B843-low.png"></div> 
                           </td>
                        </tr>
                     </table>
                  </div> 
               </p> 
            </li>
            <li>Connect the Execute output port in the <span class="MenuCascade" id="GUID-41038751-C816-4B02-ADA8-F135AF20DEEC">Crowd Lock Feet Constraint</span> compound to the <span class="MenuCascade" id="GUID-E48379BA-404F-4D17-8FD6-40C31FFCB92E">Pose Modifier</span> port in the <span class="MenuCascade" id="GUID-BD18F493-AA9D-44AB-944F-E07A917288AB">Define Move Animation State</span> compound. 
            </li>
         </ol>
         <p><span class="anchor_wrapper"><a name="GUID-E8E1085E-52E1-4CBB-BDAB-B791C7D136ED"></a></span>You can use the Define Move Animation State node for an easy setup of actors just
            walking around. Internally, this node uses the Define Animation State node and a solver
            to play the animation cycles accordingly to speed of actors walking or running around
            and prevents the feets of the actors from slipping. Select the appropriate animation
            cycles such as walking and running to be used for locomotion. <span class="anchor_wrapper"><a name="FIG_F167167420FE4586B52BEDC72913DA47"></a></span><div class="figure-anchor"><img src="../images/GUID-97B33826-8D08-4EC7-9D97-66473ACA0CAD-low.png"></div> 
         </p>
         <div class="footer-block"><a href="../html/ac.cmtdialog.htm" class="comments-anchor" target="_blank"><span class="comments-link">Please send us your comment about this page</span></a></div><br><p class="footer-license-block"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"><img alt="Creative Commons License" style="border-width: 0;" src="../images/ccLink.png"></a>&nbsp;<em>Except where otherwise noted, this work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>. Please see the <a href="http://autodesk.com/creativecommons" target="_blank">Autodesk Creative Commons FAQ</a> for more information.</em></p><br></div>
   </body>
</html>