<!DOCTYPE html>

<!-- saved from url=(0024)http://docs.autodesk.com -->
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta name="product" content="SI">
      <meta name="release" content="2015">
      <meta name="book" content="GeneralUser">
      <meta name="created" content="2014-03-26">
      <meta name="topicid" content="GUID-83891396-9A34-4C96-88E4-E0DD62A22AAA">
      <meta name="indexterm" content="final gathering: map file, generating">
      <meta name="indexterm" content="final gathering: maps per object">
      <meta name="topic-type" content="concept">
      <title>Using the Final Gathering Map</title>
      <link rel="stylesheet" type="text/css" href="../style/softimage.css"><script type="text/javascript" src="../scripts/ac_common.js"></script><script type="text/javascript" src="../scripts/utils/adsk.redirect.js"></script></head>
   <body height="100%">
      <div class="body_content" id="body-content"><span class="anchor_wrapper"><a name="GUID-83891396-9A34-4C96-88E4-E0DD62A22AAA"></a></span><div class="head">
            <h1>Using the Final Gathering Map</h1>
         </div>
         <div class="bodyProcess">
            <p><span class="anchor_wrapper"><a name="GUID-611C4D8B-895D-4D15-9713-64CB447332F2"></a></span> <span class="MenuCascade" id="GUID-94B5D4E4-230B-4FBF-AF49-E3CE62064FC9">Location:</span> 
            </p>
            <ul>
               <li> 
                  <p><span class="anchor_wrapper"><a name="GUID-2EC9868B-108F-4FD2-9D16-3DA4B1C84C05"></a></span> <span class="char_link"><a href="renderoptions_TheRenderManager.htm">The Render Manager</a></span> &gt; mental ray (Global Renderer)
                  </p> 
               </li>
               <li> 
                  <p><span class="anchor_wrapper"><a name="GUID-01266A5B-58A9-4E55-9E97-326C9174B4AD"></a></span> <span class="char_link"><a href="renderoptions_TheRenderManager.htm">The Render Manager</a></span> &gt; (expand a pass) &gt; mental ray
                  </p> 
               </li>
               <li> 
                  <p><span class="anchor_wrapper"><a name="GUID-9D1826DA-5343-45F3-8756-63931C104E51"></a></span>Set the current pass and choose Render &gt; Render &gt; Renderer Options from the Render
                     toolbar.
                  </p> 
               </li>
               <li> 
                  <p><span class="anchor_wrapper"><a name="GUID-D5590C28-1577-4E5B-98C7-72A0C8443DC9"></a></span>Tab: <span class="char_link"><a href="property4502.htm#WS3006BE1388530344A0CBB5EC50AB924E-0068">Accuracy</a></span> [<span class="char_link"><a href="property_ref.htm">Properties Reference</a></span>]
                  </p> 
               </li>
               <li> 
                  <p><span class="anchor_wrapper"><a name="GUID-A520B5AA-5E71-47D7-8DBC-AC677F437133"></a></span>Options: <span class="char_link"><a href="property4502.htm#WS3006BE1388530344A0CBB5EC50AB924E-0075">Map File</a></span> and <span class="char_link"><a href="property4502.htm#WS3006BE1388530344A0CBB5EC50AB924E-0077">GI and Caustics</a></span>.
                  </p> 
               </li>
            </ul>
            <p><span class="anchor_wrapper"><a name="GUID-678DBED8-9AC3-4B79-9520-B2B57941FD9B"></a></span>The final gathering map is a file that stores the final gathering information calculated
               before and sometimes during rendering. The final gather points recorded in earlier
               frames are reused in subsequent frames, saving a great deal of computation time.
            </p>
            <p><span class="anchor_wrapper"><a name="GUID-21CE5327-72AB-4F28-8077-9D42265F124A"></a></span>The final gathering map records the final gathering accuracy value when the map is
               first generated. If the accuracy value changes, such as between two renders of the
               same scene, the map is ignored, the final gather points regenerated, and a new final
               gathering map is created.
            </p>
            <div class="section"><span class="anchor_wrapper"><a name="WSA21E80B11B6CD64F8A12F58867B5FD5B-0033"></a></span> 
               <h2><span class="anchor_wrapper"><a name="GUID-7A935A35-A10F-4A69-A4BA-DCB479D937B8"></a></span>To generate a final gathering map
               </h2> <span class="anchor_wrapper"><a name="GUID-FFA9A407-25A5-477F-B139-3D7FE12DA718"></a></span><ol type="1" start="1">
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-54899C8C-8716-44DE-A840-110556ADF1CF"></a></span>Specify a name and path for the final gathering map in the <span class="MenuCascade" id="GUID-56E7BA53-C7FA-4792-8441-948E94A74EEC">Map File</span> text box. The current path is displayed in the <span class="MenuCascade" id="GUID-DE9A31CD-90A0-4260-966A-58939A2D821B">Resolved Map File Path</span> text box.
                     </p> 
                     <div><span class="anchor_wrapper"><a name="GUID-6C364507-C176-43C5-B4EF-F8206D2F9C19"></a></span><div class="note-important"><span class="label">IMPORTANT:</span>If <span class="MenuCascade" id="GUID-95994892-0DC0-4535-B71A-A190E03533CC">Map File</span> is left blank, no final gathering map is computed. If an invalid path is defined,
                           the render fails and ends.
                        </div>
                     </div> 
                  </li>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-E7A2CE4D-3E9E-4C7C-86F2-3ABED9390E92"></a></span>Select one of the <span class="MenuCascade" id="GUID-51266553-1450-48D4-9D43-A08545A7ACD8">Map File Settings</span> to define how the final gathering map file is used. Choose one of the following modes:
                     </p> 
                     <ul>
                        <li> 
                           <p><span class="anchor_wrapper"><a name="GUID-6227AA0B-0D24-4F5B-B021-0B2D59316B95"></a></span> <span class="MenuCascade" id="GUID-4BAB11E3-539E-4807-8C6C-82E112B1AF4E">Overwrite file with generated FG points</span> computes final gathering points at each frame and stores the results in a final gathering
                              map file that overwrites any existing map file. In other words, the final gathering
                              map is rebuilt at each frame.
                           </p> 
                           <p><span class="anchor_wrapper"><a name="GUID-DE850A59-DA14-44FB-9CB6-B2224BFA5DBD"></a></span>This is a good setting for scenes where lights or objects change frequently, or where
                              the camera moves to a point where objects that were visible in earlier frames are
                              no longer visible.
                           </p> 
                        </li>
                        <li> 
                           <p><span class="anchor_wrapper"><a name="GUID-7B8CB478-A6F3-41DB-96E3-C0DEA672E405"></a></span> <span class="MenuCascade" id="GUID-12FEF1DF-3CB0-4F4A-BF2C-A44BCCF409E7">Append generated FG points to file</span> uses an existing final gathering map file or calculates one for the first rendered
                              frame. If mental ray computes additional final gathering points for subsequent frames
                              at render time, these points are appended to the map file.
                           </p> 
                           <p><span class="anchor_wrapper"><a name="GUID-6750A6BB-DDA6-4F16-89A1-F328914A8D66"></a></span>This is especially useful in the case of small camera movements because final gathering
                              results depend on the camera's position.
                           </p> 
                        </li>
                        <li> 
                           <p><span class="anchor_wrapper"><a name="GUID-E89B27D1-1804-4E39-9425-B1580C7F3982"></a></span> <span class="MenuCascade" id="GUID-128063A4-28C3-4FC6-85F1-39F436DD38DE">Generate FG points only if file doesn't exist</span> uses an existing final gathering map (or calculates one for the first rendered frame),
                              but does not append any new points computed at render time. After the initial computation,
                              the map file is only modified if you change the final gathering <span class="MenuCascade" id="GUID-133EE4F5-8D2D-40C2-8C79-30075363184B">Number of Rays</span> value. This is useful for render farm setups where several machines may use the same
                              final gathering map.
                           </p> 
                           <p><span class="anchor_wrapper"><a name="GUID-85F890AF-3593-46F3-94B0-7ECDD24C90CF"></a></span>Final gathering calculations are based on the position of the pass camera. If you
                              are using this setting, make sure that the map file contains sufficient final gathering
                              data for all camera positions in the rendered sequence.
                           </p> 
                        </li>
                     </ul> 
                  </li>
               </ol> 
            </div>
            <div class="section"><span class="anchor_wrapper"><a name="WSA21E80B11B6CD64F8A12F58867B5FD5B-0034"></a></span> 
               <h2><span class="anchor_wrapper"><a name="GUID-CC8D6DFB-E97E-4993-8560-A6EDCB216811"></a></span>Creating Per-Object Final Gathering Maps
               </h2>  
               <p><span class="anchor_wrapper"><a name="GUID-54198A25-98F6-4B21-8AC4-BC08AC85D788"></a></span>Each object in a scene can have its own final gathering map. When you create a final
                  gathering map for a single object, the object's sampling points are no longer included
                  in the scene-wide map.
               </p> 
               <p><span class="anchor_wrapper"><a name="GUID-B3C4EF70-6F13-432A-AC0D-ABEBD28201E1"></a></span>At render time, per-object maps are computed along with the scene-wide map, according
                  to the <span class="MenuCascade" id="GUID-D865ABCA-49CE-473E-9430-D7B88AC7B5D1">Map File Setting</span> specified in the Render Manager.
               </p> 
               <div class="section"><span class="anchor_wrapper"><a name="WSA21E80B11B6CD64F8A12F58867B5FD5B-0035"></a></span> 
                  <h3><span class="anchor_wrapper"><a name="GUID-28880EA9-A13D-4723-9B8E-95AB35FE80C6"></a></span>To create a final gathering map for an individual object
                  </h3> <span class="anchor_wrapper"><a name="GUID-75D97405-9C3D-4688-A4A0-3F76D37864A7"></a></span><ol type="1" start="1">
                     <li> 
                        <p><span class="anchor_wrapper"><a name="GUID-00607A49-02D7-470F-99A6-D70A56728D5C"></a></span>Select the object whose final gathering visibility options you wish to adjust, and
                           open an explorer (press <span class="MenuCascade" id="GUID-D28E8BE8-469D-42B8-944A-7AAFEA01F599">8</span>).
                        </p> 
                     </li>
                     <li> 
                        <p><span class="anchor_wrapper"><a name="GUID-3F65DC69-C628-4A74-B774-5C0D74CAAEED"></a></span>Expand the object's hierarchy and click its <span class="MenuCascade" id="GUID-15F768F5-F7E0-4243-9F10-2934990B8D72">Visibility</span> node to open the object's Visibility sproperty editor.
                        </p> 
                     </li>
                     <li> 
                        <p><span class="anchor_wrapper"><a name="GUID-B23FDB7E-9396-486B-B7DE-53811F1AC43E"></a></span>On the Rendering tab, specify a path and file name in the <span class="MenuCascade" id="GUID-73C86AB9-87F6-47A9-8174-E5AEB6FAFE79">LocalFG</span> text box.
                        </p> 
                     </li>
                  </ol> 
               </div> 
            </div>
         </div>
         <div class="footer-block"><a href="../html/ac.cmtdialog.htm" class="comments-anchor" target="_blank"><span class="comments-link">Please send us your comment about this page</span></a></div><br><p class="footer-license-block"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"><img alt="Creative Commons License" style="border-width: 0;" src="../images/ccLink.png"></a>&nbsp;<em>Except where otherwise noted, this work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>. Please see the <a href="http://autodesk.com/creativecommons" target="_blank">Autodesk Creative Commons FAQ</a> for more information.</em></p><br></div>
   </body>
</html>