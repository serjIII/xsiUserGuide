<!DOCTYPE html>

<!-- saved from url=(0024)http://docs.autodesk.com -->
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta name="product" content="SI">
      <meta name="release" content="2015">
      <meta name="book" content="GeneralUser">
      <meta name="created" content="2014-03-26">
      <meta name="topicid" content="GUID-A0BC2374-3430-4BEC-938B-150B4215C1CC">
      <meta name="indexterm" content="CrowdFX: caching simulation point cloud into .icecache file">
      <meta name="indexterm" content="caching: CrowdFX simulation point clouds">
      <meta name="indexterm" content="CrowdFX: exporting actor copies geometry in FBX file">
      <meta name="indexterm" content="exporting: CrowdFX meshes">
      <meta name="topic-type" content="concept">
      <title>Caching or Exporting a CrowdFX Simulation</title>
      <link rel="stylesheet" type="text/css" href="../style/softimage.css"><script type="text/javascript" src="../scripts/ac_common.js"></script><script type="text/javascript" src="../scripts/utils/adsk.redirect.js"></script></head>
   <body height="100%">
      <div class="body_content" id="body-content"><span class="anchor_wrapper"><a name="GUID-A0BC2374-3430-4BEC-938B-150B4215C1CC"></a></span><div class="head">
            <h1>Caching or Exporting a CrowdFX Simulation</h1>
         </div>
         <p><span class="anchor_wrapper"><a name="GUID-6766D9B8-85C2-4221-B66A-E9BD956D50A1"></a></span>You can cache a CrowdFX simulation in two ways: 
         </p><span class="anchor_wrapper"><a name="UL_DE6E4C01F15B42A9B90B77BCBF0A7311"></a></span><ul>
            <li> 
               <p><span class="anchor_wrapper"><a name="GUID-746A9151-59E9-4996-903A-0103537CAD7D"></a></span>A simulation cache of the crowd's point cloud - see <em class="strong">Caching the Crowd Point Cloud Simulation</em> below. 
               </p> 
            </li>
            <li> 
               <p><span class="anchor_wrapper"><a name="GUID-B7C45048-0329-451D-A59F-1EED2BC30CCB"></a></span>Exporting the crowd's Actor Copies mesh in an FBX file - see <em class="strong">Exporting the Actor Copies Mesh</em> below. 
               </p> 
            </li>
         </ul>
         <div class="section"><span class="anchor_wrapper"><a name="SECTION_BC4D258F6AC64DB89F01311CEE77DA82"></a></span> 
            <h2><span class="anchor_wrapper"><a name="GUID-A29B23B1-5963-400D-896D-9D31A087AA6E"></a></span>Caching the Crowd Point Cloud Simulation
            </h2>   
            <p><span class="anchor_wrapper"><a name="GUID-8A3F1DFF-A42E-46DA-8984-1F971FADBC90"></a></span>You can create a simulation cache file of a crowd's point cloud in the .icecache file
               format. You can use this cache file to play back the crowd simulation faster, or to
               be able to scrub it in the timeline and play it backwards. The crowd particle simulation
               is cached, including the deformer transformations of each actor instance. 
            </p> 
            <p><span class="anchor_wrapper"><a name="GUID-E8A1825F-0284-4E69-B4EC-DD2894AB2CD2"></a></span> Once you've created a simulation cache file, you can use it on the same simulation
               point cloud or a different one. 
            </p> 
            <div class="section"><span class="anchor_wrapper"><a name="SECTION_914E7492FE0B40BA80355701E32D60DE"></a></span> 
               <h3><span class="anchor_wrapper"><a name="GUID-6E6511BD-52A2-483B-A74B-733777286489"></a></span>Writing the Cache File
               </h3> 
               <p><span class="anchor_wrapper"><a name="GUID-34F116BE-4202-4A87-A289-7E0F675D9AD8"></a></span>To write a simulation cache file for a crowd's simulation point cloud: 
               </p> <span class="anchor_wrapper"><a name="OL_06974092C4404322868F545EBA885D1B"></a></span><ol type="1" start="1">
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-740A8BB1-0037-4C89-882A-C39B829442D2"></a></span>In an explorer, select the Crowd model whose point cloud simulation you want to cache.
                        
                     </p> 
                  </li>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-CE51B5FB-4338-4E4D-A14C-F3FC2EF2C838"></a></span>Open its <span class="char_link"><a href="CrowdFX.htm">CrowdFX Property Editor</a></span> (for example, press F3), then enter the information in the text boxes as described
                        there. 
                     </p> 
                  </li>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-E4399E16-0CCB-4118-AEC2-83B4B3F24C5B"></a></span> If you don't enter anything in the <span class="MenuCascade" id="GUID-E2ACB9CC-F5AA-4F95-B167-DCBF154D81C1">Attributes</span> text box, Softimage automatically makes sure that all ICE attributes required for
                        the Actor Copies mesh are included. 
                     </p> 
                     <p><span class="anchor_wrapper"><a name="GUID-F7435509-BDFF-4573-B0A0-76B6155503F7"></a></span>Any attributes you enter here, such as custom attributes for the Actor Copies mesh,
                        are appended to the required attributes. Enter the attributes in a comma-separated
                        list with no spaces between the comma and the next attribute name. 
                     </p> 
                  </li>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-FC32711E-C430-49D6-ADEC-53DBDBD05E07"></a></span>Click the <span class="MenuCascade" id="GUID-5336636A-0F98-4D36-95B5-22C7E1FF44D9">Cache Point Cloud Simulation</span> button to cache the simulation. 
                     </p> 
                     <p><span class="anchor_wrapper"><a name="GUID-71AED2E7-6631-495B-B71B-6229A9A24E65"></a></span>An .icecache file is saved in the path you specified. 
                     </p> 
                  </li>
               </ol> 
            </div> 
            <div class="section"><span class="anchor_wrapper"><a name="SECTION_1A84B55744644D83B845DC5C03D689CA"></a></span> 
               <h3><span class="anchor_wrapper"><a name="GUID-35EF4F87-F66C-4DA3-B1D1-F936F7A71FCC"></a></span>Reading the Cache File
               </h3> 
               <p><span class="anchor_wrapper"><a name="GUID-444F446E-14BB-4D44-A571-85FB14368799"></a></span> Once you've created a simulation cache file, you can use it on a simulation point
                  cloud to play its contents instead of the current simulation. You can use the cache
                  file on the same simulation point cloud or a different one. 
               </p> 
               <p><span class="anchor_wrapper"><a name="GUID-AFD30A1F-E354-4E3D-A792-A88DFF9879D9"></a></span>If you're loading a cache file onto a different point cloud, its instanced envelope
                  geometry must match that used for the point cloud whose simulation was cached. 
               </p> 
               <p><span class="anchor_wrapper"><a name="GUID-F09636E5-F4E1-45BF-B660-35C4E90A7A37"></a></span>To read the cache file: 
               </p> <span class="anchor_wrapper"><a name="OL_1219DDF259384E8FA8A0AF76820AB75C"></a></span><ol type="1" start="1">
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-5502DDDB-BD05-4312-AA62-5F025E244EDF"></a></span>In an explorer, select the Crowd model on whose simulation point cloud you want to
                        load the cache file. 
                     </p> 
                  </li>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-7045C094-4DF8-4CF3-81FE-D73BF296EFCB"></a></span>Open its <span class="char_link"><a href="CrowdFX.htm">CrowdFX Property Editor</a></span>. 
                     </p> 
                  </li>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-C33F4DAE-0DB8-4125-ACF9-5F08A8242DE1"></a></span>Select a cache file in the <span class="MenuCascade" id="GUID-D46E5A6C-523F-4416-9A84-F8A56F62E6BB">Simulation Cloud File Path</span> text box. Make sure to remove the [Frame].icecache that is appended to the cache
                        file name. 
                     </p> 
                  </li>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-A0918B45-C906-4672-9BDF-65B11DB72290"></a></span>Enter the <span class="MenuCascade" id="GUID-4CF3749B-B60C-4E10-84F3-A2D5B066BCBA">Start Frame</span> and <span class="MenuCascade" id="GUID-DD208310-8C96-4BEF-8E74-A342CB17F27E">End Frame</span> as the first and last frames of the cache file you want to load. These are the frames
                        that are used to create the cache clip in the animation mixer. 
                     </p> 
                  </li>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-3137CB40-8503-46D8-8563-34FF83D08248"></a></span>Select the <span class="MenuCascade" id="GUID-05229A41-04FD-454D-9899-B09F049C9119">Use Cache</span> option to load and apply the specified cache file. 
                     </p> 
                     <p><span class="anchor_wrapper"><a name="GUID-FEFFBA7B-48DD-4B4C-A660-2CFE50917607"></a></span>This creates a hidden point cloud named Point Cloud Cached that contains a cache clip
                        in its Mixer. When <span class="MenuCascade" id="GUID-D1BF511E-4FB0-4DE5-8F0E-24E2AB34DAEF">Use Cache</span> is selected, this cache clip drives the simulation of the point cloud over the frames
                        that are contained in the cache clip - see <span class="char_link"><a href="sim_cache_LoadingtheCacheFileintotheAnimationMixer.htm#GUID-B17625AD-1B11-4AD9-9D7C-BF8215E4BEDD">Using Cache Files in the Animation Mixer</a></span> for more information. 
                     </p> 
                     <p><span class="anchor_wrapper"><a name="GUID-8469B7C4-4BB8-46A4-BA3E-D3DE3A58C6F5"></a></span>Deselect this option to return to the live simulation on the point cloud. 
                     </p> 
                  </li>
               </ol> 
            </div> 
         </div>
         <div class="section"><span class="anchor_wrapper"><a name="SECTION_68AB9ACD8435422EB2E5077D00438818"></a></span> 
            <h2><span class="anchor_wrapper"><a name="GUID-61BDCBC4-6BB6-428F-A5D7-B83B8DEAE17D"></a></span> Exporting the Actor Copies Mesh in an FBX File
            </h2>   
            <p><span class="anchor_wrapper"><a name="GUID-65FCB519-7DB4-493D-8C4B-5C53D1B4FE2F"></a></span>You can cache and export the envelope geometry of a Crowd model's Actor Copies polygon
               mesh in an FBX (.fbx) file. The Actor Copies mesh is the geometry that contains each
               copy of an actor's geometry that is deformed according to the crowd simulation. If
               you have several actor proxies in your crowd simulation, each Actor Copies mesh is
               automatically included in the export. 
            </p> <span class="anchor_wrapper"><a name="OL_A0BC47162B4045AD9954A247A56FF626"></a></span><ol type="1" start="1">
               <li> 
                  <p><span class="anchor_wrapper"><a name="GUID-8B9E1FD3-65E2-4E45-8668-08E127F49BD8"></a></span>Make sure that the crowd simulation you want to export is the current one - see <span class="char_link"><a href="GUID-2D267577-4F1A-4200-AA77-A39890B357C7.htm#GUID-D59CC5D2-1F28-4887-820A-7EB3F1847356">Setting the Current Crowd</a></span>. 
                  </p> 
               </li>
               <li> 
                  <p><span class="anchor_wrapper"><a name="GUID-60C7A643-A43C-4E0D-ACAC-7ABF2F3B8B75"></a></span><img src="../images/GUID-AEDDD3BD-7D75-4F12-8575-0276A72FD797-low.png"> Choose the <span class="MenuCascade" id="GUID-AE869A4C-3860-49BF-A7D5-6152D6F3CF57">CrowdFX <img src="../images/ac.menuaro.gif"> Crowd <img src="../images/ac.menuaro.gif"> Export Crowd as FBX (Geometry Pointcache)</span> command from the ICE toolbar. 
                  </p> 
                  <p><span class="anchor_wrapper"><a name="GUID-E60EE9BA-5836-4487-A423-C1BF58A8079B"></a></span>This command is similar to a standard Crosswalk export, but has been set up to correctly
                     export the Actor Copies mesh as it is deformed by the crowd simulation. The mesh geometry
                     is cached into nCache files. As well, the ICE Material attributes on the mesh as exported
                     as standard cluster materials. 
                  </p> 
               </li>
               <li> 
                  <p><span class="anchor_wrapper"><a name="GUID-8CB5896B-92AD-41D0-8C4E-80686C83636C"></a></span>Set the options in the <span class="char_link"><a href="dataman_xwalk_props_ExportFBXOptionsDialogBox.htm">Export FBX Options Dialog Box</a></span> dialog box and click OK to create the FBX file. 
                  </p> 
               </li>
               <li> 
                  <p><span class="anchor_wrapper"><a name="GUID-8ED0B1C3-B74A-486A-9295-BB71623A9B29"></a></span> Import the resulting FBX file into another 3D software, such as Autodesk Maya, or
                     back into Softimage using the standard <span class="MenuCascade" id="GUID-64B06235-E4EB-4461-958A-579A3D2BB746">File <img src="../images/ac.menuaro.gif"> Import <img src="../images/ac.menuaro.gif"> Import FBX</span> command. 
                  </p> 
                  <p><span class="anchor_wrapper"><a name="GUID-4FD43E5B-71F1-4192-A172-A97DCA5B1C5E"></a></span> The Actor Copies meshes are imported as a single object with each actor instance
                     deforming according to the crowd simulation. 
                  </p> 
               </li>
            </ol> 
         </div>
         <div class="footer-block"><a href="../html/ac.cmtdialog.htm" class="comments-anchor" target="_blank"><span class="comments-link">Please send us your comment about this page</span></a></div><br><p class="footer-license-block"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"><img alt="Creative Commons License" style="border-width: 0;" src="../images/ccLink.png"></a>&nbsp;<em>Except where otherwise noted, this work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>. Please see the <a href="http://autodesk.com/creativecommons" target="_blank">Autodesk Creative Commons FAQ</a> for more information.</em></p><br></div>
   </body>
</html>