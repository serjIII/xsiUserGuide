<!DOCTYPE html>

<!-- saved from url=(0024)http://docs.autodesk.com -->
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta name="product" content="SI">
      <meta name="release" content="2015">
      <meta name="book" content="GeneralUser">
      <meta name="created" content="2014-03-26">
      <meta name="topicid" content="GUID-C9A68029-9E18-418E-8D95-EFE1229EE8B1">
      <meta name="topic-type" content="concept">
      <title>mia_portal_light</title>
      <link rel="stylesheet" type="text/css" href="../style/softimage.css"><script type="text/javascript" src="../scripts/ac_common.js"></script><script type="text/javascript" src="../scripts/utils/adsk.redirect.js"></script></head>
   <body height="100%">
      <div class="body_content" id="body-content"><span class="anchor_wrapper"><a name="GUID-C9A68029-9E18-418E-8D95-EFE1229EE8B1"></a></span><div class="head">
            <h1>mia_portal_light</h1>
         </div>
         <div class="bodyProcess">
            <p><span class="anchor_wrapper"><a name="GUID-75DE1833-03E0-471E-991D-37355B585E41"></a></span> <em class="strong">Category:</em> mental ray &gt; Light 
            </p>
            <p><span class="anchor_wrapper"><a name="GUID-3448B41F-0E14-43CE-BB4A-CA1CA87B73A6"></a></span> <em class="strong">Shader Family:</em> Light 
            </p>
            <p><span class="anchor_wrapper"><a name="GUID-5397F05A-3313-412F-A8C1-D4E82A64E467"></a></span> <em class="strong">Output:</em> Color 
            </p>
            <p><span class="anchor_wrapper"><a name="GUID-088AF6A5-C7C8-42DA-B231-3F1EBA463897"></a></span> <span class="MenuCascade" id="GUID-96D040A2-6EFC-46F8-9F82-AFD384ED893C">Related Softimage shader:</span> <span class="char_link"><a href="light_shaders_PortalLight.htm">Portal Light (mia)</a></span> 
            </p>
            <p><span class="anchor_wrapper"><a name="GUID-5928F2C5-2571-4498-83D0-63D845B363C1"></a></span>This shader is most often applied to a rectangular area light which is placed in the
               window of a room scene. The shader obtains its proper intensity and color from the
               sky outside the window (for example, an environment shader such as the <span class="char_link"><a href="mentalray_mia_physicalsky.htm">mia_physicalsky</a></span> shader or similar) and how much of that sky can be seen. 
            </p>
            <p><span class="anchor_wrapper"><a name="GUID-EF55F401-6059-4829-98AE-E8ABEC0DC923"></a></span>When used with final gathering, the mia_portal_light acts as a final gathering concentrator,
               so that instead of having to send thousands of final gather rays around the scene
               to "find" the window, the portal light actually blocks final gather rays, and instead
               converts light from beyond the window to direct light, including high-quality area
               shadows. 
            </p>
            <p><span class="anchor_wrapper"><a name="GUID-613F03A6-C7CD-4220-9F8D-F8D47DAFFB5C"></a></span>Final gathering will now see a well lit room rather than a black room, and can use
               much lower final gather ray counts. Furthermore, since the light from the window is
               now direct, you gain one extra light bounce for "free". 
            </p><span class="anchor_wrapper"><a name="TABLE_E60C0C14ADB6449B8E0653BA2B99A743"></a></span><div class="table_Ruled">
               <table cellpadding="0" cellspacing="0" class="ruled">
                  <colgroup>
                     <col width="220px" align="left">
                     <col align="left">
                  </colgroup>
                  <tr class="ruledOddRow">
                     <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-AABCFFCF-06E9-4642-BFCA-9865970A07CD"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-2FAE7BBF-1EFC-4015-839C-47B179CB72FB">Name</span> 
                        </p> 
                     </td>
                     <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-63503F0E-4446-4A99-A0FE-EB15E863FCD7"></a></span><p class="table-body">The name of the shader node displayed in the render tree. Enter any name you like,
                           or leave the default. 
                        </p> 
                     </td>
                  </tr>
                  <tr class="ruledEvenRow">
                     <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-4507CBEA-5E24-4D36-9A51-65CBB395BE3D"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-3654FEB3-FEBE-4480-ACBA-BFED8ABC0193">on</span> 
                        </p> 
                     </td>
                     <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-040DB8C6-C03A-4EB3-A40D-28EB6AA72848"></a></span><p class="table-body">Enables or disables the light. </p> 
                     </td>
                  </tr>
                  <tr class="ruledOddRow">
                     <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-0DC57397-63AD-40B1-B859-CD3A9B423056"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-138ECDC4-193B-41A5-855A-D98FB0D21DF2">multiplier</span> 
                        </p> 
                     </td>
                     <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-C430114B-7B71-42E2-94DB-3204476CB864"></a></span><p class="table-body">A multiplier for the intensity of the light. </p> 
                     </td>
                  </tr>
                  <tr class="ruledEvenRow">
                     <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-C54DA632-E891-46BD-847C-2934BCEBD304"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-BEC84025-1B3E-4BD7-BA66-507D2496A9C7">tint_color</span> 
                        </p> 
                     </td>
                     <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-D9B09ED0-023A-43CB-811C-D0519282B93A"></a></span><p class="table-body">Modifies the light color. </p> <span class="anchor_wrapper"><a name="GUID-B16364F8-C943-4555-AB70-DDB0E8C696CC"></a></span><p class="table-body">When tint_color is white, and the Intensity is 1.0, the light emitted is equal in
                           intensity and color to the environment light that final gathering would have seen
                           if allowed to send many thousands of (unfiltered) final gather rays. 
                        </p> 
                     </td>
                  </tr>
                  <tr class="ruledOddRow">
                     <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-A858B13C-4C57-44EB-9FFE-D5493C05D265"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-89C8C2C9-DD53-476A-82D8-8AB9D8429C44">reverse</span> 
                        </p> 
                     </td>
                     <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-B6FA5C04-5467-4162-AEF2-64F87227AD69"></a></span><p class="table-body">The light normally shines in the positive Z direction of the light object's coordinate
                           space. If <span class="MenuCascade" id="GUID-5D14830A-0018-4FFB-93F1-764E4DC2A421">reverse</span> is on, it shines in the negative Z direction. 
                        </p> 
                     </td>
                  </tr>
                  <tr class="ruledEvenRow">
                     <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-203941DE-0DFF-469D-B153-936BC79890C0"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-A8878B18-8B2C-495F-B1F1-61AE190589C4">cutoff_threshold</span> 
                        </p> 
                     </td>
                     <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-33AF3930-E1DF-4118-A7EE-6823D7F8DD44"></a></span><p class="table-body">This is a performance optimization option. Any light below this level is ignored,
                           and no shadow rays are traced (which is what consumes the bulk of the render time
                           of an area light). Of course, this makes the scene slightly darker since light is
                           ignored, but can save a lot of excess render time. 
                        </p> 
                     </td>
                  </tr>
                  <tr class="ruledOddRow">
                     <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-619FBF44-C1A0-4557-B5D1-95C3ED745FF6"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-3A37E794-C048-439F-886F-B6D1C5B61DE3">shadows</span> 
                        </p> 
                     </td>
                     <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-6B4F9F30-C707-43EB-9D83-7CA2189F3BFF"></a></span><p class="table-body">Turns shadows on or off. </p> 
                     </td>
                  </tr>
                  <tr class="ruledEvenRow">
                     <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-7ED310CA-5A9E-4AEB-9711-3C56C566A365"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-AB3E2B48-3101-473F-A74F-891C3F2D5F9F">use_custom_environment</span> 
                        </p> 
                     </td>
                     <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-8115E061-D7E6-4298-9AA5-040802DF035B"></a></span><p class="table-body">When off, the mia_portal_light shader gets the color of the light from the global
                           environment shader defined for the scene. 
                        </p> <span class="anchor_wrapper"><a name="GUID-C2441796-0C2F-4C43-86D4-6918C5DB11A9"></a></span><p class="table-body">When on, the mia_portal_light shader calls the shader that is connected to its <span class="MenuCascade" id="GUID-39DB002B-7B3E-4179-B97A-B6F0A289007D">custom_environment</span> input port in order to get the color of the light. 
                        </p> <span class="anchor_wrapper"><a name="GUID-E18CC354-4F82-46CF-99B9-EE3C05F1666F"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-C642B92D-8650-4C8E-B342-FBF809F75487">Light card example:</span> While this shader is intended to be a portal to an environment, you can also use
                           it as a "light card" by connecting a shader that returns a solid background color
                           into its custom_environment input port. If use_custom_environment is on, and no custom
                           environment is actually passed, the shader behaves like a white light card. 
                        </p> 
                     </td>
                  </tr>
                  <tr class="ruledOddRow">
                     <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-8FED7EE9-BA67-4CFF-A68E-65FE1B89CA12"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-871A92FA-B749-4DF0-B2B7-B68D734FFA3A">custom_environment</span> 
                        </p> 
                     </td>
                     <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-FFEFED17-C65F-45E9-AE3F-03DDC96DFB77"></a></span><p class="table-body">When <span class="MenuCascade" id="GUID-7E5AAAB8-FDEA-4728-838E-9C09353A55B7">use_custom_environment</span> is on, the mia_portal_light shader calls the shader that is connected to this parameter
                           port in order to get the color of the light. 
                        </p> 
                     </td>
                  </tr>
                  <tr class="ruledEvenRow">
                     <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-3E99EC76-6EF7-4C42-BD9D-D4FC61EBE463"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-47B61B53-941E-4AC3-A0E5-6102DEDCA41C">visible</span> 
                        </p> 
                     </td>
                     <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-16ECAED7-A669-4900-A4F4-C143AB8C4294"></a></span><p class="table-body">Specifies whether or not the light emitting surface is visible in the render. </p> <span class="anchor_wrapper"><a name="GUID-E24DB470-EB56-4874-B7B7-F64F2FCDE79B"></a></span><p class="table-body">When off, eye rays, reflection rays, etc. go straight through so that the portal light
                           itself remains unseen and you can still "see" out the window. 
                        </p> <span class="anchor_wrapper"><a name="GUID-09BB3BAE-6901-4C07-A33A-C50C4B33C408"></a></span><p class="table-body">When on, the actual light emitting surface becomes visible to eye rays, reflection
                           rays, etc. and you cannot "see" out the window anymore, although you can still "see"
                           the environment shader's result. This is useful when using the mia_portal_light as
                           a light card shader (see <span class="MenuCascade" id="GUID-02F859B6-E956-4BF5-BD8D-58684A786F42">use_custom_environment</span> option). 
                        </p> 
                     </td>
                  </tr>
                  <tr class="ruledOddRow">
                     <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-47AF4772-D69F-47E7-8736-E13257045A7C"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-58EB8D6D-73AA-456D-8328-E124AB8E2C40">lookup_using_fg_rays</span> 
                        </p> 
                     </td>
                     <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-7C9508A1-FC8C-463D-A135-5EDD9C9A0911"></a></span><p class="table-body">When off, a ray is cast into the environment and the environment shader is called
                           to compute the color of the light. 
                        </p> <span class="anchor_wrapper"><a name="GUID-CAE26CD5-2460-4551-B2DC-22ACB283FAA4"></a></span><p class="table-body">However, some shaders behave differently if they are called by a final gather ray
                           or by another ray (for example, the mia_physicalsky shader does not show the "image"
                           of the visible sun to final gather rays). Since the main purpose of the mia_portal_light
                           shader is to act as a final gather concentrator, it should therefore follow that behavior.
                           So when lookup_using_fg_rays is on, it calls the environment with the final gather
                           ray type, so that shaders that switch their behavior based on this can return the
                           color appropriate for a final gather ray. 
                        </p> 
                     </td>
                  </tr>
                  <tr class="ruledEvenRow">
                     <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-11F98A4B-9276-482F-B0FD-21DC70C7C7FD"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-D4CB892B-AAA6-4187-962D-0FB46C1078C9">shadow_ray_extension</span> 
                        </p> 
                     </td>
                     <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-C3BAA36C-30CE-4B8A-A5A6-9B040763D789"></a></span><p class="table-body">If shadow_ray_extension is 0 (zero), the mia_portal_light shader begins tracing shadow
                           rays at the light. When positive, the shadow rays actually start at that distance
                           "outdoors". So if there is a large object just outside the window, its shadow will
                           be taken into account. Conversely, a negative value allows the shadow rays to begin
                           at that distance inside the window, which allows the shadow generation to skip over
                           troublesome geometry near the window (such as flowers, curtains, etc.) that would
                           otherwise just introduce noise into the shadows. 
                        </p> 
                     </td>
                  </tr>
                  <tr class="ruledOddRow">
                     <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-F2578B30-7681-4DF8-B2AB-47AA2F82EE02"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-A9D14AA9-F2CC-499C-AE7A-BE64AD28240D">emit_direct_photons</span> 
                        </p> 
                     </td>
                     <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-1B22AC83-BB7B-4BE9-A1BE-4EEC5CEEC98D"></a></span><p class="table-body">If emit_direct_photons is on, the light only shoots photons and does not actually
                           emit any direct light at all. 
                        </p> 
                     </td>
                  </tr>
                  <tr class="ruledEvenRow">
                     <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-3ECA9FCA-B1B4-4FB5-925E-E15C00E066C2"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-D72B5CB0-5DCF-4337-B778-C7EC14D70266">transparency</span> 
                        </p> 
                     </td>
                     <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-7F5DDBF1-553E-4EC4-9650-3F41CC2097EF"></a></span><p class="table-body">The transparency has two functions: </p> <span class="anchor_wrapper"><a name="UL_9EFD3CC5C21E4F5FB534FF42FCEA2B90"></a></span><ul>
                           <li> 
                              <p><span class="anchor_wrapper"><a name="GUID-41AF6822-E1E7-47E9-A996-342F95BCAB48"></a></span>When <span class="MenuCascade" id="GUID-6146A43F-5D69-4769-AAE4-645153D5C4E7">visible</span> is on, <span class="MenuCascade" id="GUID-F5728F09-8EA3-43A7-8B00-E740A69337E0">transparency</span> is a multiplier for the "visible color" of the area light. When set to white, the
                                 directly "visible" color is the one dictated by the laws of physics for a surface
                                 that emits that amount of light. 
                              </p> 
                              <p><span class="anchor_wrapper"><a name="GUID-B9DF99FC-A57F-4090-A698-A0BAD1CF1310"></a></span>Modifying the parameter values away from white allows you to artificially change the
                                 balance between the visible result (which is changed by changing this parameter) and
                                 the intensity of the emitted light (which is not affected by this parameter). This
                                 can be useful to avoid noise 
                              </p> 
                           </li>
                           <li> 
                              <p><span class="anchor_wrapper"><a name="GUID-74CD3F16-8258-4C77-A7E9-F0C1F6EE5E3A"></a></span>When <span class="MenuCascade" id="GUID-1C929BAF-B41D-40F8-8EE3-D95D46E75F00">visible</span> is off, <span class="MenuCascade" id="GUID-BD81DBFC-55DF-411F-A0BC-EA707CEF197A">transparency</span> defines the transparency of the area light. This allows the mia_portal_light shader
                                 to double as a "gel" on the window, to subdue the intensity of what is seen outdoors,
                                 which otherwise tends to appear overexposed and blown out. The actual emitted light
                                 intensity is not affected by this, nor does this affect the intensity of other light
                                 rays travelling through the window, it only affects what is visible to the eye, in
                                 refractions or reflections. 
                              </p> 
                           </li>
                        </ul> 
                     </td>
                  </tr>
               </table>
            </div>
         </div>
         <div class="footer-block"><a href="../html/ac.cmtdialog.htm" class="comments-anchor" target="_blank"><span class="comments-link">Please send us your comment about this page</span></a></div><br><p class="footer-license-block"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"><img alt="Creative Commons License" style="border-width: 0;" src="../images/ccLink.png"></a>&nbsp;<em>Except where otherwise noted, this work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>. Please see the <a href="http://autodesk.com/creativecommons" target="_blank">Autodesk Creative Commons FAQ</a> for more information.</em></p><br></div>
   </body>
</html>