<!DOCTYPE html>

<!-- saved from url=(0024)http://docs.autodesk.com -->
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta name="product" content="SI">
      <meta name="release" content="2015">
      <meta name="book" content="GeneralUser">
      <meta name="created" content="2014-03-26">
      <meta name="topicid" content="GUID-B28743FA-33EC-4DA3-877B-FA7E7FD97F68">
      <meta name="indexterm" content="CrowdFX: Crowd model parts">
      <meta name="indexterm" content="Crowd model">
      <meta name="topic-type" content="concept">
      <title>Anatomy of a Crowd Simulation</title>
      <link rel="stylesheet" type="text/css" href="../style/softimage.css"><script type="text/javascript" src="../scripts/ac_common.js"></script><script type="text/javascript" src="../scripts/utils/adsk.redirect.js"></script></head>
   <body height="100%">
      <div class="body_content" id="body-content"><span class="anchor_wrapper"><a name="GUID-B28743FA-33EC-4DA3-877B-FA7E7FD97F68"></a></span><div class="head">
            <h1>Anatomy of a Crowd Simulation</h1>
         </div>
         <p><span class="anchor_wrapper"><a name="GUID-2670BED3-6AE5-443A-A5B0-4DB5780C91EF"></a></span>   
         </p>
         <p><span class="anchor_wrapper"><a name="GUID-804C486A-10FD-4B66-AB34-7DD240FBBCD7"></a></span>There are several models and nodes involved in creating a CrowdFX simulation. 
         </p>
         <p><span class="anchor_wrapper"><a name="GUID-9E1B18FD-655B-4EA8-9843-356C9207614E"></a></span>Each of the letters on the nodes in this image corresponds to a description in the
            table below: 
         </p><span class="anchor_wrapper"><a name="FIG_D6D3389D4679453BB2CE4E84C4204A60"></a></span><div class="figure-anchor"><img src="../images/GUID-ACF756F9-288A-459A-B080-CF4E37281360-low.png"></div><span class="anchor_wrapper"><a name="TABLE_BBAA49DF2BD04A30ADB2E5103CAD5E0B"></a></span><div class="table_Ruled">
            <table cellpadding="0" cellspacing="0" class="ruled">
               <colgroup>
                  <col width="11.11111111111111%" align="left">
                  <col width="88.88888888888889%" align="left">
               </colgroup>
               <tr class="ruledOddRow">
                  <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-5F1B9486-24B9-4D6B-8C13-B8274EAF806B"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-29C4E4F2-F4B0-4C13-8ED5-5EB26167E03A">A</span> 
                     </p> 
                  </td>
                  <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-AACD2E78-E6E5-4D42-9CC8-784ED5D23BCE"></a></span><p class="table-body"> The <em class="strong">original model</em> (sometimes called the <em class="mild">source model</em> or <em class="mild">actor source</em>) is a polygon mesh object that is enveloped to a set of deformers, and has action
                        sources (and optionally shape keys) defined for it in its Mixer node. 
                     </p> <span class="anchor_wrapper"><a name="GUID-1B4CB36B-EBC1-4971-9B11-07F472890EC7"></a></span><p class="table-body">See <span class="char_link"><a href="GUID-14884AF9-388D-4C63-B5CF-325B05F4FACE.htm">Preparing a Model for CrowdFX</a></span> for a list of requirements for the model to be used with CrowdFX. 
                     </p> <span class="anchor_wrapper"><a name="GUID-6C83A6CE-B5D3-4FEA-8EE3-A27CBA4B5A22"></a></span><p class="table-body">Once you have created the crowd simulation, you can hide the original model by clicking
                        the <span class="MenuCascade" id="GUID-5CEAB861-3750-43E4-9DCF-DC9A60F3CE31">Show/Hide Actor Source</span> button in the <span class="char_link"><a href="CrowdFX_ActorProxy_CrowdFX_ActorProxy_CrowdFX_ActorProxy_CrowdFX_ActorProxy_CrowdFX_ActorProxy.htm">CrowdFX Actor Proxy Property Editor</a></span> (<em class="strong">D</em>). 
                     </p> 
                  </td>
               </tr>
               <tr class="ruledEvenRow">
                  <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-41FFFF8D-6608-4B0F-93C1-76549F3E1110"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-C33028BE-67A5-489F-975E-00101C3A6C40">B</span> 
                     </p> 
                  </td>
                  <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-DA1DC22F-7DAA-4F92-9606-B2E8749CF624"></a></span><p class="table-body">The <em class="strong">Crowd model</em> is created as soon as you select an actor to be used for CrowdFX (see <span class="char_link"><a href="GUID-AF081E95-A70E-4BA6-A1DC-856C05C35A46.htm">Loading Actors for the Crowd Simulation</a></span>). This model contains all the nodes that are required for a single crowd simulation.
                        
                     </p> <span class="anchor_wrapper"><a name="GUID-151A36D2-56DE-4776-9145-C81A8DB694C5"></a></span><p class="table-body">You can have multiple crowd simulations in a scene, but only one can be the current
                        crowd (see <span class="char_link"><a href="GUID-2D267577-4F1A-4200-AA77-A39890B357C7.htm#GUID-D59CC5D2-1F28-4887-820A-7EB3F1847356">Setting the Current Crowd</a></span>). 
                     </p> <span class="anchor_wrapper"><a name="GUID-06DADA16-D2BC-4E66-A3FB-18D61B3A6AE7"></a></span><p class="table-body">In the <span class="char_link"><a href="CrowdFX.htm">CrowdFX Property Editor</a></span>, whose icon is directly below the Crowd model node, you can set this crowd as the
                        current one, as well as cache the crowd simulation. 
                     </p> 
                  </td>
               </tr>
               <tr class="ruledOddRow">
                  <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-A72EE503-D6D7-444C-9229-853C7DB341B7"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-772D033B-543C-40FE-84E7-0CFD7444B7C5">C</span> 
                     </p> 
                  </td>
                  <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-E19137E6-CB81-442E-B4AB-C11A8316D884"></a></span><p class="table-body"> The <em class="strong">Actors_Proxies</em> node contains all the actor proxy models (<em class="strong">D</em>) that are used in this crowd simulation. You can use multiple actor proxies in each
                        crowd simulation. 
                     </p> <span class="anchor_wrapper"><a name="GUID-AA4B3609-C8A3-445B-ADB9-3A145C67CC64"></a></span><p class="table-body">In the <span class="char_link"><a href="CrowdFX_ActorsProxies.htm">CrowdFX Actors Proxies Property Editor</a></span>, whose icon is directly below this node, you can access all actor proxies in the
                        crowd. Here you can inspect each actor proxy's animation or rig, as well as add actors
                        to, or remove them from, the simulation. 
                     </p> <span class="anchor_wrapper"><a name="GUID-44C77E71-A08D-4DD6-88F0-980A503B7AE8"></a></span><p class="table-body">Choose the <span class="MenuCascade" id="GUID-6194160B-4816-4E1B-8F31-B9577B431F82">CrowdFX <img src="../images/ac.menuaro.gif"> Actors <img src="../images/ac.menuaro.gif"> Inspect Actor Proxies</span> command on the ICE toolbar to open this property editor. 
                     </p> 
                  </td>
               </tr>
               <tr class="ruledEvenRow">
                  <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-FC51A05E-8278-4139-BC9F-B8A9652D2B24"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-2DC63323-C61A-4213-A3D6-71E222455552">D</span> 
                     </p> 
                  </td>
                  <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-4640A28A-34DF-431F-9BA3-7791392B6F7D"></a></span><p class="table-body"> An <em class="strong">actor proxy</em> model (sometimes called the <em class="mild">actor model</em> or just <em class="mild">actor</em>) is a node that contains a copy of the original model's mesh (<em class="strong">A</em>). All other elements that are required for this actor proxy for CrowdFX are contained
                        within this model. 
                     </p> <span class="anchor_wrapper"><a name="GUID-1758AE31-5F45-4EDD-97A0-76681E62AF2F"></a></span><p class="table-body">A proxy model is created for each original model that you select to be in the crowd
                        simulation - in this case, it's a proxy of the original AstroMan model. 
                     </p> <span class="anchor_wrapper"><a name="GUID-3D6AC895-F662-4C29-B7CF-232FCC8150B1"></a></span><p class="table-body">In the <span class="char_link"><a href="CrowdFX_ActorProxy_CrowdFX_ActorProxy_CrowdFX_ActorProxy_CrowdFX_ActorProxy_CrowdFX_ActorProxy.htm">CrowdFX Actor Proxy Property Editor</a></span>, whose icon is directly below this node, you can manage the actor proxy, such as
                        selecting the actions that the actor proxy will use in the crowd simulation, as well
                        as other tasks. 
                     </p> 
                  </td>
               </tr>
               <tr class="ruledOddRow">
                  <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-A568D1FE-36DE-4109-9CEB-2ECFEDFB7C1D"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-BA6C3F4D-8193-47EB-923C-D1ABEC2C5EE4">E</span> 
                     </p> 
                  </td>
                  <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-2054EF86-DDE4-4F34-9460-ED4B1A145D31"></a></span><p class="table-body">The <em class="strong">Animation Proxies</em> node contains a point cloud for each of the action sources loaded for the actor proxy.
                        The local transform data that was in each action source is stored in the point cloud
                        as global transform data on every deformer in the rig proxy (<em class="strong">F</em>) at each frame of animation. 
                     </p> <span class="anchor_wrapper"><a name="GUID-BF8A48E2-EBC4-4175-AD12-DD0B35AAC455"></a></span><p class="table-body">The point clouds also set certain ICE attributes on the actions so that they can be
                        used in the ICE trees for the crowd simulation. 
                     </p> 
                  </td>
               </tr>
               <tr class="ruledEvenRow">
                  <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-9B5BC092-07AF-4960-B0D5-AAE4DE6ECF9D"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-0DCDFEA9-EAF5-4FD1-BAAD-30B4CC6620BD">F</span> 
                     </p> 
                  </td>
                  <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-7C2BC19C-7232-4F88-AC2C-2EC57894B817"></a></span><p class="table-body"> The <em class="strong">Rig Proxy</em> is a copy of the original model's rig, but includes only its deformers - any other
                        part of the original rig is not copied. This rig is the one used to deform the actor
                        proxy in the crowd simulation. 
                     </p> <span class="anchor_wrapper"><a name="GUID-841547D3-A778-4403-BD0B-54432D662C25"></a></span><p class="table-body"> You can make changes to the hierarchy or create constraints on the rig proxy without
                        affecting the original model's rig or animation - see <span class="char_link"><a href="GUID-721F44F7-62DF-485B-B035-48A6B2248EC4.htm">Modifying the Actor's Rig</a></span> for more information. 
                     </p> <span class="anchor_wrapper"><a name="GUID-0900AA5A-531C-43CC-8061-F395CB9187D3"></a></span><p class="table-body">To see the rig proxy, click the <span class="MenuCascade" id="GUID-193EA877-6111-4036-B269-CC65CFB15021">View Rig</span> button in either the <span class="char_link"><a href="CrowdFX_ActorProxy_CrowdFX_ActorProxy_CrowdFX_ActorProxy_CrowdFX_ActorProxy_CrowdFX_ActorProxy.htm">CrowdFX Actor Proxy Property Editor</a></span> or <span class="char_link"><a href="CrowdFX_ActorsProxies.htm">CrowdFX Actors Proxies Property Editor</a></span>. 
                     </p> 
                  </td>
               </tr>
               <tr class="ruledOddRow">
                  <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-4F8C9900-A1C0-4E2B-BA23-0437D40248F6"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-B5562CFE-9058-42C5-B56A-B5165DD5EA3D">G</span> 
                     </p> 
                  </td>
                  <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-C3247C4E-E926-41B6-A403-1C7974E4EF3E"></a></span><p class="table-body">The <em class="strong">Actor Copies</em> polygon mesh is a single mesh that includes all instances of an actor's mesh in the
                        crowd simulation. This is normally the actor instance geometry that you see in the
                        viewport. See <span class="char_link"><a href="GUID-9CE64265-93DD-4F5B-AEEE-2594DD00B212.htm">Viewing the Actor's Envelope</a></span> for more information. 
                     </p> <span class="anchor_wrapper"><a name="GUID-1EA014D9-A44B-4046-B861-A3CB27CE7CB0"></a></span><p class="table-body"> You can toggle the visibility of the Actor Copies mesh of the current crowd with
                        the <span class="MenuCascade" id="GUID-AE413A6B-B394-4F56-ADC3-4A1A53C2F05C">CrowdFX <img src="../images/ac.menuaro.gif"> Crowd <img src="../images/ac.menuaro.gif"> Edit <img src="../images/ac.menuaro.gif"> Show/Hide PolyMesh Copies</span> command on the ICE toolbar. 
                     </p> 
                  </td>
               </tr>
               <tr class="ruledEvenRow">
                  <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-EE3DEA9F-503E-4389-8FDD-CA2933412A97"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-8C56E239-3325-4BA8-8516-9FE63ACF2248">H</span> 
                     </p> 
                  </td>
                  <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-2E463F3C-43F3-46D8-A52A-8BF680BE13E3"></a></span><p class="table-body">The <em class="strong">Mesh Proxies</em> polygon mesh is a copy of the original model's mesh. It's hidden by default, but
                        you can display it in an OpenGL display mode using a realtime skinning shader. See
                        <span class="char_link"><a href="GUID-9CE64265-93DD-4F5B-AEEE-2594DD00B212.htm">Viewing the Actor's Envelope</a></span> for more information 
                     </p> 
                  </td>
               </tr>
               <tr class="ruledOddRow">
                  <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-7A9D4BFE-29A9-4E03-ADDA-AB88E5798FB7"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-DE7B1C4D-0FAA-4793-8F7F-2906F6AC6ACF">I</span> 
                     </p> 
                  </td>
                  <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-5729AFCC-EC32-4031-B672-7DCD3EFFEA58"></a></span><p class="table-body"> The <em class="strong">Skeletons Cloud</em> point cloud stores data for the actor proxy and is hidden by default. 
                     </p> <span class="anchor_wrapper"><a name="GUID-9EC9C19B-B445-4161-A2C1-B481768DEC60"></a></span><p class="table-body">It contains the <em class="strong">Create Actor Cloud</em> ICE tree in the Modeling region that gets data from the crowd simulation point cloud
                        (<em class="strong">L</em>), and stores information about each instance of the actor in the simulation, such
                        as its global point position, envelope deformation information, shape key, and Actor
                        ID. 
                     </p> 
                  </td>
               </tr>
               <tr class="ruledEvenRow">
                  <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-032AE864-376E-4217-9D20-8FCB3C5EEBC9"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-2A41E9DA-30C1-463B-9DCD-0B247A6A37A7">J</span> 
                     </p> 
                  </td>
                  <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-CC0EC59F-7A1E-4F7D-8A1E-8123E2133205"></a></span><p class="table-body"> The <em class="strong">Deformer Proxies group</em> contains references to all the deformers in the actor's Rig Proxy (<em class="strong">F</em>). Having the deformers in a group makes it easier to access them because they're
                        displayed in a flat list, and not nested as they are in a hierarchy. 
                     </p> 
                  </td>
               </tr>
               <tr class="ruledOddRow">
                  <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-4FEB4DCD-B523-4C26-9E7C-E57A6ABB976A"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-3F11BBBF-5675-41A2-97C1-248DC2A5912D">K</span> 
                     </p> 
                  </td>
                  <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-7503E0E9-E99E-4C0A-ABE9-1918000BBF2F"></a></span><p class="table-body">The <em class="strong">Simulation node</em> contains data related to the emitters, goal objects, walls (obstacles), and the point
                        cloud (<em class="strong">L</em>) that drives the crowd simulation. 
                     </p> <span class="anchor_wrapper"><a name="UL_1FF75AE05F9E4EF8B1A2DBE13FEFDB67"></a></span><ul>
                        <li>The <em class="strong">Emitters_Root</em> null contains the geometry for each directional emitter you draw in the crowd simulation
                           - see <span class="char_link"><a href="GUID-44632D31-DABE-4CAF-B335-18EE455EB9C9.htm">Crowd Particle Emitters</a></span>. 
                        </li>
                        <li>The <em class="strong">Walls_Root</em> null contains the geometry for each wall created in the crowd simulation - see <span class="char_link"><a href="GUID-69D22EF7-7F50-4BBD-9D26-07C29FEBA219.htm">Avoiding Collisions with Obstacles (Walls)</a></span>. 
                        </li>
                        <li>The <em class="strong">Goals_Root</em> null contains the geometry for each goal object created in the crowd simulation -
                           see <span class="char_link"><a href="GUID-1F99F61E-66A8-450A-9869-C82EE0E68935.htm">Moving Toward Goals</a></span>. 
                        </li>
                     </ul> 
                  </td>
               </tr>
               <tr class="ruledEvenRow">
                  <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-066DE620-297E-4876-AB30-9FE58731D8D4"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-16A89F5E-DB41-4C68-9D15-644507E0BAB3">L</span> 
                     </p> 
                  </td>
                  <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-A2DB2962-68BD-4CA6-B533-55AB7DD2B878"></a></span><p class="table-body">The <em class="strong">Point_Cloud</em> is the point cloud that drives the crowd simulation. It has several ICE trees in
                        it, as described in <span class="char_link"><a href="GUID-2D267577-4F1A-4200-AA77-A39890B357C7.htm">Creating the Crowd Particle Simulation</a></span>. 
                     </p> <span class="anchor_wrapper"><a name="GUID-9CDCD813-320F-48E8-A8F4-484A9ACA215B"></a></span><p class="table-body">Choose the <span class="MenuCascade" id="GUID-2B54CB2A-86B7-48C0-874C-2196049B404B">CrowdFX <img src="../images/ac.menuaro.gif"> Simulation <img src="../images/ac.menuaro.gif"> Select Simulation Cloud</span> command to select this point cloud. 
                     </p> 
                  </td>
               </tr>
               <tr class="ruledOddRow">
                  <td class="table-body"> <span class="anchor_wrapper"><a name="GUID-AC397EE3-8067-4A53-88DE-DE5034C86692"></a></span><p class="table-body"> <span class="MenuCascade" id="GUID-18A4D40D-30FA-46BF-926B-F32D93398D20">M</span> 
                     </p> 
                  </td>
                  <td class="table-body" align="left"> <span class="anchor_wrapper"><a name="GUID-A66EA3A7-8A3D-4FF2-947C-D9BAA87D96D4"></a></span><p class="table-body">These <em class="strong">groups</em> contain references to objects in various parts of the Crowd model. They make it easy
                        to find similar elements that belong to this crowd simulation. 
                     </p> 
                  </td>
               </tr>
            </table>
         </div>
         <div class="footer-block"><a href="../html/ac.cmtdialog.htm" class="comments-anchor" target="_blank"><span class="comments-link">Please send us your comment about this page</span></a></div><br><p class="footer-license-block"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"><img alt="Creative Commons License" style="border-width: 0;" src="../images/ccLink.png"></a>&nbsp;<em>Except where otherwise noted, this work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>. Please see the <a href="http://autodesk.com/creativecommons" target="_blank">Autodesk Creative Commons FAQ</a> for more information.</em></p><br></div>
   </body>
</html>