<!DOCTYPE html>

<!-- saved from url=(0024)http://docs.autodesk.com -->
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta name="product" content="SI">
      <meta name="release" content="2015">
      <meta name="book" content="GeneralUser">
      <meta name="created" content="2014-03-26">
      <meta name="topicid" content="GUID-E5A22C48-ED1B-47A6-BF85-1AF8422EDD69">
      <meta name="indexterm" content="pinning: cloth areas">
      <meta name="indexterm" content="nailing: cloth areas">
      <meta name="indexterm" content="cloth simulation: nailing or pinning areas">
      <meta name="indexterm" content="cloth simulation: clusters for local effects">
      <meta name="indexterm" content="clusters: on cloth">
      <meta name="topic-type" content="concept">
      <title>Using Clusters for Localized Effects</title>
      <link rel="stylesheet" type="text/css" href="../style/softimage.css"><script type="text/javascript" src="../scripts/ac_common.js"></script><script type="text/javascript" src="../scripts/utils/adsk.redirect.js"></script></head>
   <body height="100%">
      <div class="body_content" id="body-content"><span class="anchor_wrapper"><a name="GUID-E5A22C48-ED1B-47A6-BF85-1AF8422EDD69"></a></span><div class="head">
            <h1>Using Clusters for Localized Effects</h1>
         </div>
         <div class="bodyProcess">
            <p><span class="anchor_wrapper"><a name="GUID-673D6D5E-5DDC-404D-8186-C63664791EE2"></a></span>You can set clusters of tagged points to define specific areas of a cloth. For example,
               you can create a flag or curtains blowing in the wind or have a corner of a blanket
               bunch up as a character grabs it. To do these local effects, you create clusters of
               points where you want to have the effect on the cloth object. 
            </p>
            <p><span class="anchor_wrapper"><a name="GUID-B032CC18-ADEE-4F26-87B5-9AF3DB74538F"></a></span>Activating a cluster means locking its points so that the simulation doesn't affect
               them. Activated clusters may be static or subject to any type of deformation. A decay
               factor defines how the assigned values are propagated to the cloth vertices near the
               clustered vertices. Changes in the cluster list are also supported. 
            </p>
            <p><span class="anchor_wrapper"><a name="GUID-B1E17870-2078-4FA5-A8F9-7519C5F5DB2A"></a></span>Another useful way of using clusters is to animate their activation. By animating
               the <span class="MenuCascade" id="GUID-2C8ACCE2-8D83-45DB-A354-25D976D47CDE">Nail</span> parameter, you can animate the effect of a cloth being pinned down and then released.
               An activated cluster (<span class="MenuCascade" id="GUID-4CEBF841-8B2C-49B0-BD14-B7253185919F">Nail</span> is on) is not affected by the cloth deformation: it is either locked in time or moves
               according to the original animation or deformation of the model. A deactivated cluster
               (<span class="MenuCascade" id="GUID-824F5287-6F4E-4867-BB4E-95261C80A9F8">Nail</span> is off) behaves as all the rest of the cloth model with its deformation being driven
               by the cloth simulation (see <span class="char_link"><a href="cloth_UsingClustersforLocalizedEffects.htm#WSE1C045C7AF7B3A4BA3ECAD303D087181-0040">Pinning an Object</a></span>). 
            </p>
            <div><span class="anchor_wrapper"><a name="GUID-5E5604C9-0B10-4592-84FE-80D00EDE29B8"></a></span><div class="note-note"><span class="label">NOTE:</span>Edge and polygon clusters are not supported. 
               </div>
            </div>
            <div class="section"><span class="anchor_wrapper"><a name="WSE1C045C7AF7B3A4BA3ECAD303D087181-003C"></a></span> 
               <h2><span class="anchor_wrapper"><a name="GUID-402CDF2E-1D20-497B-BE72-3BAB17F8B141"></a></span>To use clusters on a cloth object
               </h2> <span class="anchor_wrapper"><a name="GUID-365D1EB3-9522-4FDD-9C53-0F0E3D13A263"></a></span><ol type="1" start="1">
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-8E42156E-DBD7-4C18-8D3A-9CB18E8C0C0F"></a></span>Select a cloth object (one that already has cloth applied to it) — see the procedure
                        on <span class="char_link"><a href="cloth_CreatingaClothSimulation.htm">Creating a Cloth Simulation</a></span>. 
                     </p> 
                  </li>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-4D587DA3-8D87-4AA5-A3CD-E73424CE03AB"></a></span>Select existing clusters on the cloth object or tag the points you want to use for
                        clusters (press <span class="MenuCascade" id="GUID-8BEAD66E-0E48-4EAA-9616-6D29BD5987AB">T</span> and select the points). 
                     </p> 
                     <div class="figure-anchor"><img src="../images/GUID-03409B35-C22A-44FF-9C53-C91AB37A3C64-low.png"></div> 
                  </li>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-D8EBAB9F-1AF6-4F7D-8041-B87DF1864057"></a></span>Choose <span class="MenuCascade" id="GUID-3CE4B70F-9E28-485C-88AC-6DC856C84AC0">Create</span><img src="../images/ac.menuaro.gif"><span class="MenuCascade" id="GUID-88F1B926-88EC-4ACA-A9CA-23EE405B8D91">Cloth</span><img src="../images/ac.menuaro.gif"><span class="MenuCascade" id="GUID-DC6598FC-6600-418F-9E2C-74B52EA4D8E1">Local Cloth Cluster</span> from the Simulate toolbar. In the Cloth property editor that opens, set the parameters.
                        
                     </p> 
                     <div class="figure-anchor"><img src="../images/GUID-3AE318E5-03AA-4671-88B7-55BA9C2850D9-low.png"></div> 
                     <p><span class="anchor_wrapper"><a name="GUID-18A01B7B-9156-49B5-A7BC-459D58DA1C2B"></a></span>The Nail option keeps the cluster nailed to its location with no influence from forces.
                        It also makes the cluster move or deform according to any animation. 
                     </p> 
                     <p><span class="anchor_wrapper"><a name="GUID-E8CF8AB4-E974-4D5E-94DC-70BBFA4FD9CD"></a></span>The Local option activates local physical properties of the cluster for the cloth.
                        
                     </p> 
                  </li>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-0AAF2671-0167-40C5-AB0E-3F19003D730B"></a></span>If you want to keep an object pinned down and then release it, animate the <span class="MenuCascade" id="GUID-F32B3A30-020F-4092-8CDD-664A07205972">Nail</span> parameter's activation (on and off). 
                     </p> 
                     <div class="figure-anchor"><img src="../images/GUID-2E6110E3-6A2E-4F50-B959-0232E4A25459-low.png"></div> 
                     <p><span class="anchor_wrapper"><a name="GUID-7EE9291C-1D2B-4B6C-A917-5DEA2FABA5E2"></a></span>Cluster is deformed by gravity applied to the object (Nail option is off). The Nail
                        option is on for the rest of the cloth object so that it stays put. 
                     </p> 
                     <div><span class="anchor_wrapper"><a name="GUID-F6631728-0267-4532-8C3F-3CDA0ACA7F8C"></a></span><div class="note-note"><span class="label">NOTE:</span>If you use a weight map on the Nail option (click on its connection icon), the results
                           will not be a gradual falloff of the weight map values because the Nail option is
                           an on/off option (Boolean). This means that 100% of the weight map will be in effect
                           where the weight map value is 50% or more, and 0% where the weight map value is less
                           than 50%. 
                        </div>
                     </div> 
                     <p><span class="anchor_wrapper"><a name="GUID-01F50DDD-2BC3-417A-B864-6EED952F3A65"></a></span>In the explorer, you'll see a Cloth icon under each cluster that has the cloth cluster
                        command applied to it — see <span class="char_link"><a href="cloth_AboutClothSimulations.htm#WSE1C045C7AF7B3A4BA3ECAD303D087181-000D">Finding Cloth Elements in the Explorer</a></span> for more information. 
                     </p> 
                  </li>
               </ol> 
            </div>
            <div class="section"><span class="anchor_wrapper"><a name="WSE1C045C7AF7B3A4BA3ECAD303D087181-0040"></a></span> 
               <h2><span class="anchor_wrapper"><a name="GUID-ABFBA6AA-BE4E-46B5-9B4F-F0D74DC3E3AC"></a></span>Pinning an Object
               </h2> 
               <p><span class="anchor_wrapper"><a name="GUID-E6635BFD-C3AA-46F9-9192-FFAB0E4EA7BC"></a></span>Here's a short example of how to pin an object with the Nail parameter. 
               </p> <span class="anchor_wrapper"><a name="GUID-08C7067C-F7D9-43FC-A13A-4FA16BD456BE"></a></span><ol type="1" start="1">
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-A3704A26-50F6-40F8-A2FA-4B7475AD486E"></a></span>Make two clusters on an object that already has a cloth operator applied to it: one
                        cluster for the main area and one for the area you want to pin. 
                     </p> 
                  </li>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-EEF330A7-9A29-4F5D-8C1F-F1BC7788802E"></a></span>Apply the <span class="MenuCascade" id="GUID-137F35EF-9BAD-4CBC-9B56-91CD8C47F6C7">Create <img src="../images/ac.menuaro.gif"> Cloth <img src="../images/ac.menuaro.gif"> Local Cloth Cluster</span> command to each cluster. 
                     </p> 
                  </li>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-CFA6C14B-C125-4C40-83A5-3017D35C74A9"></a></span>Apply a gravity force to the cloth object. 
                     </p> 
                  </li>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-17E62547-8544-4C25-B28D-EF6F35E1DA0C"></a></span>Envelope the cloth to an animated skeleton. 
                     </p> 
                  </li>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-BF037CC4-C2DE-4C32-8B91-7A59AB334E6F"></a></span>Select the <span class="MenuCascade" id="GUID-AD802ED8-5700-42BD-B203-6ABA713CE7E3">Nail</span> parameters for one of the two clusters. 
                     </p> 
                  </li>
               </ol> 
               <p><span class="anchor_wrapper"><a name="GUID-FB439C02-82E9-4ABD-91B9-468491FC375C"></a></span>When you play the simulation, the pinned cluster moves and deforms because of the
                  skeleton-envelope relation. The cluster that is not pinned deforms due to the cloth
                  simulation. 
               </p> 
            </div>
            <div class="section"><span class="anchor_wrapper"><a name="WSE1C045C7AF7B3A4BA3ECAD303D087181-0041"></a></span> 
               <h2><span class="anchor_wrapper"><a name="GUID-7BBEB97E-71D3-40DA-A8A1-C3867ED72505"></a></span>Animating the Cluster
               </h2> 
               <p><span class="anchor_wrapper"><a name="GUID-005F6BC2-0ACD-4252-A834-A763AC3B75EF"></a></span>You can also animate the cloth model or the clusters themselves. 
               </p> 
               <p><span class="anchor_wrapper"><a name="GUID-76C765C8-68BD-4129-A03B-E62758FF165E"></a></span>If you are using an animated cluster center for the cloth object, you need to create
                  and animate it <em class="mild">before</em> you apply cloth. 
               </p> 
               <p><span class="anchor_wrapper"><a name="GUID-5947B01C-DB43-480A-9A18-CDD458B005CD"></a></span>If you create the cluster center <em class="mild">after</em> you have applied the cloth to the object, the cloth operator doesn't know that the
                  cluster is animated because of the order in which the operators were applied. 
               </p> 
               <p><span class="anchor_wrapper"><a name="GUID-C67D8D31-96E4-45B1-BCC6-481222A04841"></a></span>A quick workaround for fixing this problem is to open an explorer and change the order
                  of operators so that the cloth operator is above the cluster center operator. 
               </p> 
               <div class="section"><span class="anchor_wrapper"><a name="WSE1C045C7AF7B3A4BA3ECAD303D087181-0042"></a></span> 
                  <h3><span class="anchor_wrapper"><a name="GUID-A68BAD7E-14DE-4840-935C-C19CCF421AD5"></a></span>Animating a Cluster's Position
                  </h3> 
                  <p><span class="anchor_wrapper"><a name="GUID-3656CE79-E184-447A-87C5-32A760C98BFD"></a></span>Suppose you want to pull a towel by animating the position of a cluster on the cloth.
                     Here's how you do it: 
                  </p> <span class="anchor_wrapper"><a name="GUID-9F0E1B3F-CDFE-4464-95D4-D9FE1B79F7AA"></a></span><ol type="1" start="1">
                     <li> 
                        <p><span class="anchor_wrapper"><a name="GUID-B7ADFADB-7184-485A-B2E4-E2625ED38242"></a></span>Create the towel object and create a cluster with a center. 
                        </p> 
                     </li>
                     <li> 
                        <p><span class="anchor_wrapper"><a name="GUID-CC82E9B7-32B9-49E4-B0C5-C2510AE27C9F"></a></span>Animate the position of the cluster's center. 
                        </p> 
                     </li>
                     <li> 
                        <p><span class="anchor_wrapper"><a name="GUID-31DA26C3-EE1F-45F8-862C-F0BE09D833B9"></a></span>Select the towel and choose <span class="MenuCascade" id="GUID-7A6EED53-76BB-475A-9EEA-7504F3B18DA6">Create <img src="../images/ac.menuaro.gif"> Cloth <img src="../images/ac.menuaro.gif"> From Selection</span> to apply the Cloth operator. 
                        </p> 
                     </li>
                     <li> 
                        <p><span class="anchor_wrapper"><a name="GUID-F5CE0EDA-8396-44A1-BD61-18B2E00C097E"></a></span>With the cluster selected, choose <span class="MenuCascade" id="GUID-1442A3DF-5220-4443-A58C-9EB4F7EAB0B2">Create <img src="../images/ac.menuaro.gif"> Cloth <img src="../images/ac.menuaro.gif"> Local Cloth Cluster</span> to apply local cloth effects and select the <span class="MenuCascade" id="GUID-3E9F76C6-881B-4C21-A3AF-2DD856D90DD7">Nail</span> option. 
                        </p> 
                        <div><span class="anchor_wrapper"><a name="GUID-A694AD4B-9E6D-4BCA-A952-7F58A94675FB"></a></span><div class="note-tip"><span class="label">TIP:</span>Animate the Nail option to have the cluster center "carry" and then drop the towel.
                              
                           </div>
                        </div> 
                     </li>
                  </ol> 
               </div> 
            </div>
         </div>
         <div class="footer-block"><a href="../html/ac.cmtdialog.htm" class="comments-anchor" target="_blank"><span class="comments-link">Please send us your comment about this page</span></a></div><br><p class="footer-license-block"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"><img alt="Creative Commons License" style="border-width: 0;" src="../images/ccLink.png"></a>&nbsp;<em>Except where otherwise noted, this work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>. Please see the <a href="http://autodesk.com/creativecommons" target="_blank">Autodesk Creative Commons FAQ</a> for more information.</em></p><br></div>
   </body>
</html>