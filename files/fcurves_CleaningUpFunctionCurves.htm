<!DOCTYPE html>

<!-- saved from url=(0024)http://docs.autodesk.com -->
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta name="product" content="SI">
      <meta name="release" content="2015">
      <meta name="book" content="GeneralUser">
      <meta name="created" content="2014-03-26">
      <meta name="topicid" content="GUID-7AB69EE8-588B-4E8E-9BBC-4AB27CB406FE">
      <meta name="indexterm" content="noise: reducing on function curves">
      <meta name="indexterm" content="function curves: reducing noise">
      <meta name="indexterm" content="function curves: smoothing">
      <meta name="indexterm" content="smoothing: function curves">
      <meta name="indexterm" content="function curves: reducing keyframes on">
      <meta name="indexterm" content="motion capture data: cleaning up function curves">
      <meta name="indexterm" content="function curves: fitting">
      <meta name="indexterm" content="fitting: function curves">
      <meta name="indexterm" content="function curves: simplifying">
      <meta name="indexterm" content="function curves: increasing key points on">
      <meta name="indexterm" content="function curves: resampling">
      <meta name="indexterm" content="resampling: function curves">
      <meta name="topic-type" content="concept">
      <title>Cleaning Up Function Curves (Curve Processing)</title>
      <link rel="stylesheet" type="text/css" href="../style/softimage.css"><script type="text/javascript" src="../scripts/ac_common.js"></script><script type="text/javascript" src="../scripts/utils/adsk.redirect.js"></script></head>
   <body height="100%">
      <div class="body_content" id="body-content"><span class="anchor_wrapper"><a name="GUID-7AB69EE8-588B-4E8E-9BBC-4AB27CB406FE"></a></span><div class="head">
            <h1>Cleaning Up Function Curves (Curve Processing)</h1>
         </div>
         <div class="bodyProcess">
            <p><span class="anchor_wrapper"><a name="GUID-98D03EF5-5A6E-441C-AFE4-1A52C550666A"></a></span>Function curves created in Softimage usually have keys that are located at various
               frames throughout your animation. Softimage evaluates the fcurve and interpolates
               between the keys. 
            </p>
            <p><span class="anchor_wrapper"><a name="GUID-1AC5436B-8C77-40DE-9467-E1402EC589EC"></a></span>Fcurves generated from external sources such as motion capture, however, may have
               many more keys than necessary (commonly one key per frame) or they may contain "noise"
               â€” sharp spikes and jags in the fcurve. You may want to remove some of the keys or
               reduce the noise to edit the animation. 
            </p><img src="../images/GUID-E7554982-C84A-4071-BC2C-D23C82C4810C-low.png"><p><span class="anchor_wrapper"><a name="GUID-94383A31-C354-4197-AD93-6375FFA595A0"></a></span>Conversely, if you keyframe an animation in Softimage and you want to transfer the
               animation data to an external device that requires frame-by-frame information (for
               example, a camera), you may want to increase the number of keyframes and preserve
               the motion as best as possible. 
            </p>
            <p><span class="anchor_wrapper"><a name="GUID-39A7E2E4-B3FF-4724-803B-02CD44CD0D28"></a></span>In addition to whole fcurves, you can choose to apply any of the curve processing
               commands on regions of fcurves that you select with the Region Keys tool (press the
               Q key). This lets you clean up only certain parts of an fcurve that may need some
               work. 
            </p>
            <p><span class="anchor_wrapper"><a name="GUID-A429B517-C04A-47B5-8B83-1B380DFA24A2"></a></span>In the image below, fitting has been applied to only the selected region of an fcurve.
               
            </p><img src="../images/GUID-E3416B85-2D3E-4146-A155-809E15315F99-low.png"><div class="section"><span class="anchor_wrapper"><a name="WS7D3CF27A1F861246AE428C3790A69202-017B"></a></span> 
               <h2><span class="anchor_wrapper"><a name="GUID-265EAA73-873A-4AD3-A641-680FFF7D1C4A"></a></span>Reducing Noise (Smoothing)
               </h2>     
               <p><span class="anchor_wrapper"><a name="GUID-D12C0ABD-2CEC-43AC-9450-0040C4376EA3"></a></span>Smoothing decreases the variation between consecutive keyframes on the fcurve. It
                  recreates keyframes at a regular time interval along the fcurve. It also modifies
                  each keyframe's value, resetting it closer to the average value of all keyframes so
                  that the result of repeated applications of the Smooth command would be a flat curve!
                  
               </p> 
               <p><span class="anchor_wrapper"><a name="GUID-02C8C5BB-62E6-4E70-B20E-57609F24D6C1"></a></span>To reduce noise on an fcurve or region, do either of the following: 
               </p> <span class="anchor_wrapper"><a name="UL_41D75931E96A4888829BE059D958779E"></a></span><ul>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-47A1D722-317D-495A-BB54-AF2DA5B96867"></a></span>Select one or more fcurves, or draw a region over the part of the fcurves, that you
                        want to smooth, then choose <span class="MenuCascade" id="GUID-2322293E-E1E4-47CE-91CA-2E477A0CA707">Curves <img src="../images/ac.menuaro.gif"> Smooth</span> from the fcurve editor toolbar. 
                     </p> 
                     <p><span class="anchor_wrapper"><a name="GUID-63155E4A-2CC3-4DE7-B885-B4718B0306A3"></a></span>This immediately smooths the fcurves or region using the current options set for smoothing
                        in the Fcurve Editor Preferences editor. 
                     </p> 
                  </li>
               </ul> 
               <p><span class="anchor_wrapper"><a name="GUID-3F0D41CD-593B-4978-9125-3CB665EB62AC"></a></span> <em class="mild">or</em> 
               </p> <span class="anchor_wrapper"><a name="GUID-866D2C8A-D36B-48BB-9852-940E8D5BCB4C"></a></span><ol type="1" start="1">
                  <li>Select one or more fcurves, or draw a region over the part of the fcurves, that you
                     want to smooth. 
                  </li>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-DA530B95-B3A2-4321-95DA-0ABC1273FFA3"></a></span>Choose <span class="MenuCascade" id="GUID-63D1CF37-59E3-4B8D-B384-1D57813DB87F">Curves <img src="../images/ac.menuaro.gif"> Curve Processing Options</span> or open the Fcurve Editor Preferences editor. 
                     </p> 
                  </li>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-467FC90C-5B27-4254-A544-37AE4E287EA5"></a></span>On the Curve Processing page, choose the <span class="MenuCascade" id="GUID-C1FC790B-BD97-4A80-9BBD-62903DB9EF76">Smooth</span> method: 
                     </p> <span class="anchor_wrapper"><a name="UL_75E741691AA844628E52F894C94FC601"></a></span><ul>
                        <li> 
                           <p><span class="anchor_wrapper"><a name="GUID-5F4BD492-9538-4F40-AF24-7CDC90D0122C"></a></span>Use <span class="MenuCascade" id="GUID-A4E02712-7541-40F4-AF55-73B13C0E9E66">Average Filter</span> to apply a moving average where the weights of the averages are uniformly distributed.
                              You can define the number of keys to average at a time using <span class="MenuCascade" id="GUID-0532C4E8-DCE4-4074-BA08-D6CA1BB2766D">Filter Size</span>. A greater number of keys results in a straighter curve. 
                           </p> 
                        </li>
                        <li> 
                           <p><span class="anchor_wrapper"><a name="GUID-F09A0271-B6E7-483C-8AF0-8578543DDC7C"></a></span>Use <span class="MenuCascade" id="GUID-6688D98B-FF9A-4A1E-9A33-BB9BF1AE5673">Gaussian Filter</span> to apply a moving average where the weights of the averages are distributed as a
                              bell curve. Use the <span class="MenuCascade" id="GUID-42DB74E9-B17D-4951-80F8-07EA1365F9AE">Variance</span> setting to control the degree of smoothing. A higher variance results in a smoother
                              curve. The Gaussian filter usually provides better results than the Average filter.
                              
                           </p> 
                        </li>
                     </ul> 
                  </li>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-34A32E32-6EA6-4E07-99E9-97AD189985B1"></a></span>Choose <span class="MenuCascade" id="GUID-F0536BD1-63D2-4B0A-BA48-8D520D91FD11">Curves <img src="../images/ac.menuaro.gif"> Smooth</span> from the fcurve editor toolbar using the options you've set. 
                     </p> 
                     <p><span class="anchor_wrapper"><a name="GUID-B8359F08-EBEF-472F-B60B-FA67E4C4934B"></a></span>In the image below, a Gaussian filter was used with a Filter Size value of 10 and
                        a Variance value of 5. The original fcurve is displayed as the buffer curve. 
                     </p> <span class="anchor_wrapper"><a name="FIG_2CABF59F7A054F61A78A41B590150509"></a></span><div class="figure-anchor"><img src="../images/GUID-30BA6277-5478-4C1D-AE3F-94D20B2098A4-low.png"></div> 
                  </li>
               </ol> 
            </div>
            <div class="section"><span class="anchor_wrapper"><a name="WS7D3CF27A1F861246AE428C3790A69202-017F"></a></span> 
               <h2><span class="anchor_wrapper"><a name="GUID-A0D1FAFF-C3FF-4894-85EE-2B684073A813"></a></span>Simplifying the Curve (Fitting)
               </h2>      
               <p><span class="anchor_wrapper"><a name="GUID-68913054-F851-43CB-8353-1D704DF81E47"></a></span>You can simplify the curve by reducing the number of keys on it while preserving its
                  original shape, also known as <em class="mild">fitting</em>. You can also use the <span class="MenuCascade" id="GUID-68EC6125-5FEF-4A10-B965-350FD2DAE9D9">Resample</span> option to reduce (or increase) the number of keys (see below). 
               </p> 
               <p><span class="anchor_wrapper"><a name="GUID-C4D00393-8986-4B7F-8BF3-C5D1A852EC8D"></a></span>To simplify an fcurve or region, do either of the following: 
               </p> <span class="anchor_wrapper"><a name="UL_05C01272DDF845BC8E5D48C5AC0D0908"></a></span><ul>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-4FC01992-F864-4BE3-AB0A-FA0FDE3FF50C"></a></span>Select one or more fcurves, or draw a region over the part of the fcurves, that you
                        want to fit, then choose <span class="MenuCascade" id="GUID-411866C6-236E-4F41-896A-64A65591CC6E">Curves <img src="../images/ac.menuaro.gif"> Simplify Curve</span> from the fcurve editor toolbar. 
                     </p> 
                     <p><span class="anchor_wrapper"><a name="GUID-1609399D-60EB-4AA2-B657-8A8C9B7112EE"></a></span>This immediately fits the fcurves or region using the current options set for fitting
                        in the Fcurve Editor Preferences editor. 
                     </p> 
                     <p><span class="anchor_wrapper"><a name="GUID-4EBB6CF0-BCAA-4CD3-99B9-4A69EF2A5C4C"></a></span> <em class="mild">or</em> 
                     </p> 
                  </li>
               </ul> <span class="anchor_wrapper"><a name="GUID-B48B4890-45F3-44BB-BE9F-A293D8DD20DC"></a></span><ol type="1" start="1">
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-DCD92EF9-F330-48B4-9104-CDAFF4EA673B"></a></span>Select one or more fcurves, or draw a region over the part of the fcurves, that you
                        want to simplify. 
                     </p> 
                  </li>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-9390CEE4-8F64-4B75-AD79-2AFC115E7D3C"></a></span>Choose <span class="MenuCascade" id="GUID-980B4AD1-1551-4364-89CE-81D7557F2669">Curves <img src="../images/ac.menuaro.gif"> Curve Processing Options</span> or open the<span class="char_link"><a href="animeditor10.htm">Fcurve Editor Preferences</a></span> editor. 
                     </p> 
                  </li>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-F2C779A3-B0FC-4E15-ADB3-1EEF0FFDD866"></a></span>On the Curve Processing page, define a <span class="MenuCascade" id="GUID-F7D73CF3-99EB-4515-B728-87ACA0E76C0E">Simplify <img src="../images/ac.menuaro.gif"> Tolerance</span> value to set the processing accuracy. 
                     </p> 
                     <p><span class="anchor_wrapper"><a name="GUID-80A25D38-8032-46EB-BA7E-EDA3A91F1444"></a></span>The higher the value, the more keys are removed, resulting in the curve's shape deviating
                        more from the original fcurve. Smaller values yield a closer fit to the original curve,
                        but retain more keys. 
                     </p> 
                  </li>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-5983D864-0EE1-4FA5-A517-16CF224412D2"></a></span>Choose <span class="MenuCascade" id="GUID-B3672F0E-8EA5-4495-9192-C5FBA30C8636">Curves <img src="../images/ac.menuaro.gif"> Simplify Curve</span> from the fcurve editor toolbar. 
                     </p> 
                     <p><span class="anchor_wrapper"><a name="GUID-22E411EA-085D-46EB-AE7E-40B9B68356EE"></a></span>In the image below, the fcurve is fitted with a Tolerance value of 2. The original
                        fcurve is displayed as the buffer curve. 
                     </p> <span class="anchor_wrapper"><a name="FIG_F79AD97CB8644B7A8151F4F95B72870B"></a></span><div class="figure-anchor"><img src="../images/GUID-8635E83A-49F1-449B-A9FA-ACDA9A0B4BA3-low.png"></div> 
                  </li>
               </ol> 
               <div class="section"><span class="anchor_wrapper"><a name="WS7D3CF27A1F861246AE428C3790A69202-0183"></a></span> 
                  <h3><span class="anchor_wrapper"><a name="GUID-CF10BF36-29E3-411F-BAE4-B1C974BBABA3"></a></span>Resampling Before Simplifying
                  </h3> 
                  <p><span class="anchor_wrapper"><a name="GUID-ABD7CDD2-5099-4610-AFFE-6C65E2B80B5E"></a></span>If you are using a low-density fcurve (one with few keys), you may find it useful
                     to resample a curve before simplifying. This way, you can apply a fit using a spline
                     curve to help preserve the smoothness of the resulting fitted curve. If you fit a
                     low-density curve without doing this, the segments between the keys may be more linear
                     than you want. 
                  </p> 
                  <p><span class="anchor_wrapper"><a name="GUID-F4B67692-3A5A-46BB-BF46-2402CD27B4E8"></a></span> To resample a curve before simplifying: <span class="anchor_wrapper"><a name="UL_70BD1AE721F34CD6BB22B8F1719361B9"></a></span><ul>
                        <li> 
                           <p><span class="anchor_wrapper"><a name="GUID-0916FEFD-CFFD-4FFC-913C-77C63416A334"></a></span>Select the <span class="MenuCascade" id="GUID-7E5E55FD-F6B4-47F5-A943-A07EBFEFE3E6">Resample Before Simplify</span> option on the Curve Processing page in the Fcurve Preferences editor, and specify
                              the <span class="MenuCascade" id="GUID-37964669-0203-4E94-A5EE-225C4794399E">Time Step</span> (under <span class="MenuCascade" id="GUID-A30E21DD-70CF-42AB-AA33-F9F49CE0F60B">Resample</span>). 
                           </p> 
                           <p><span class="anchor_wrapper"><a name="GUID-2E56A1EA-F440-439B-98EF-8D5D30088762"></a></span>The resampling is performed first, then the fitting action as previously described.
                              
                           </p> 
                        </li>
                     </ul> 
                  </p> 
               </div> 
            </div>
            <div class="section"><span class="anchor_wrapper"><a name="WS7D3CF27A1F861246AE428C3790A69202-0185"></a></span> 
               <h2><span class="anchor_wrapper"><a name="GUID-174FADD9-E5C7-461C-8603-BDEE89D3C569"></a></span>Changing the Number of Keyframes (Resampling)
               </h2>    
               <p><span class="anchor_wrapper"><a name="GUID-13AE9D65-4253-4C10-86AC-4CA85BEA8C41"></a></span>Resampling adds or removes keyframes at the interval that you specify. 
               </p> 
               <p><span class="anchor_wrapper"><a name="GUID-D3FF1D7D-6DA0-4C34-A4DF-0317C718A6B5"></a></span> To change the number of keyframes on an fcurve or in a region, do either of the following:
                  
               </p> <span class="anchor_wrapper"><a name="UL_51BB25C1BB344647A1F0BA0B41E48D58"></a></span><ul>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-94ADB926-D627-4758-83E3-C2D56AE1826D"></a></span>Select one or more fcurves, or draw a region over the part of the fcurves, that you
                        want to resample, then choose <span class="MenuCascade" id="GUID-86F04E5E-C271-4F97-8C89-BC1128973395">Curves <img src="../images/ac.menuaro.gif"> Resample Curve</span> from the fcurve editor toolbar. 
                     </p> 
                     <p><span class="anchor_wrapper"><a name="GUID-FC051B95-7F2E-4A7A-99DA-0665E43E9965"></a></span>This immediately resamples the fcurves or region using the current options set for
                        resampling in the Fcurve Editor Preferences editor. 
                     </p> 
                     <p><span class="anchor_wrapper"><a name="GUID-9FECCB10-5C06-4D1E-9C9A-0BBBA1AB45DE"></a></span> <em class="mild">or</em> 
                     </p> 
                  </li>
               </ul> <span class="anchor_wrapper"><a name="GUID-1CBF04DC-2E51-49BB-B8F8-2112A10F7844"></a></span><ol type="1" start="1">
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-39A734CF-3350-4E52-ACF4-38049BF3DA70"></a></span>Select one or more fcurves, or draw a region over the part of the fcurves, that you
                        want to resample. 
                     </p> 
                  </li>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-E4DB5AC4-FF78-4059-A831-E3935A6A286C"></a></span>Choose <span class="MenuCascade" id="GUID-0DE6C56F-E74D-48EB-A04E-9CBBB7836B4D">Curves <img src="../images/ac.menuaro.gif"> Curve Processing Options</span> or open the Fcurve Editor Preferences editor. 
                     </p> 
                  </li>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-1A0FB1C9-EA08-4240-B96F-F66649E77F81"></a></span>On the Curve Processing page, set the <span class="MenuCascade" id="GUID-E090D535-EC84-40DE-BBD4-A69A80A7C3FD">Resample <img src="../images/ac.menuaro.gif"> Time Step</span>. The time step determines the frequency of the generated keyframes. 
                     </p> 
                     <p><span class="anchor_wrapper"><a name="GUID-A30564A4-12B2-4F2C-8207-38822DAFC0F7"></a></span>For instance, a time step of 2 creates a keyframe on every second frame, or a time
                        step of 5 creates a keyframe at every fifth frame. 
                     </p> 
                     <p><span class="anchor_wrapper"><a name="GUID-CD0A457B-73BC-4700-9FEE-B7C8A95FFE38"></a></span>You can also choose to keep or discard the original keys on the curve by selecting
                        <span class="MenuCascade" id="GUID-A874C822-5CAB-46BD-A2B5-5B63B0FA2E7D">Keep Existing Keys</span>. 
                     </p> 
                  </li>
                  <li> 
                     <p><span class="anchor_wrapper"><a name="GUID-EAA240BB-B516-41D2-BE84-902FBD228C0C"></a></span>Choose <span class="MenuCascade" id="GUID-A7E522A4-274A-433D-99C8-857656E3EB43">Curves <img src="../images/ac.menuaro.gif"> Resample Curve</span> from the fcurve editor toolbar. 
                     </p> 
                     <p><span class="anchor_wrapper"><a name="GUID-975BF1D8-0BE9-4CFB-9BD1-EE35F3183064"></a></span>In the image below, an fcurve is resampled with a Time Step value of 10 to have one
                        key at every tenth frame. The original fcurve is displayed as the buffer curve. 
                     </p> <span class="anchor_wrapper"><a name="FIG_35DADF9029764648ADC91AC9F8DDE44E"></a></span><div class="figure-anchor"><img src="../images/GUID-B3D006C4-4803-4D4B-8646-4D2660F24945-low.png"></div> 
                  </li>
               </ol> 
            </div>
         </div>
         <div class="footer-block"><a href="../html/ac.cmtdialog.htm" class="comments-anchor" target="_blank"><span class="comments-link">Please send us your comment about this page</span></a></div><br><p class="footer-license-block"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank"><img alt="Creative Commons License" style="border-width: 0;" src="../images/ccLink.png"></a>&nbsp;<em>Except where otherwise noted, this work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>. Please see the <a href="http://autodesk.com/creativecommons" target="_blank">Autodesk Creative Commons FAQ</a> for more information.</em></p><br></div>
   </body>
</html>